<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Noor Community Mentoring Program</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;800&family=Questrial&display=swap" rel="stylesheet">
    
    <!-- Animate.css for animations -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    
    <style>
        /* =====================================================================
           Organic Sage UI — Mobile-first, stable, and soothing
           Palette preserved; accessibility + mobile ergonomics improved.
           (Strictly adhering to provided CSS)
           ===================================================================== */

        /* ------------------------------- Design tokens ----------------------------------*/
        :root {
            --primary-sage: #7A8471;
            --secondary-sage: #9CAF88;
            --tertiary-sage: #B8C5A6;
            --warm-cream: #F8F6F0;
            --soft-white: #FEFCF7;
            --forest-shadow: #5A6B52;
            --border-sage: rgba(122, 132, 113, 0.20);
            --hover-sage: rgba(156, 175, 136, 0.15);

            --deep-forest: #3E4A3A;
            --moss: #6E7A67;
            --fern: #8FA081;
            --dried-clay: #D9CDB4;
            --amber: #C6AA77;
            --ink: #2F3A2B;
            --ink-muted: #5A6B52;

            --font-display: 'Questrial', system-ui, -apple-system, Segoe UI, Roboto, 'Helvetica Neue', Arial, sans-serif;
            --font-body: 'Nunito', system-ui, -apple-system, Segoe UI, Roboto, 'Helvetica Neue', Arial, sans-serif;

            --step--1: clamp(0.875rem, 0.84rem + 0.15vw, 0.95rem);
            --step-0: clamp(1rem, 0.96rem + 0.22vw, 1.1rem);
            --step-1: clamp(1.125rem, 1.07rem + 0.35vw, 1.3rem);
            --step-2: clamp(1.375rem, 1.28rem + 0.55vw, 1.6rem);
            --step-3: clamp(1.75rem, 1.58rem + 0.95vw, 2.1rem);
            --step-4: clamp(2.25rem, 1.98rem + 1.35vw, 2.7rem);

            --space-1: 0.25rem;
            --space-2: 0.5rem;
            --space-3: 0.75rem;
            --space-4: 1rem;
            --space-5: 1.25rem;
            --space-6: 1.5rem;
            --space-7: 2rem;
            --space-8: 2.5rem;
            --space-9: 3rem;

            --radius-sm: 10px;
            --radius: 16px;
            --radius-lg: 20px;
            --radius-xl: 28px;

            --shadow-1: 0 1px 2px rgba(34, 41, 32, 0.05), 0 2px 8px rgba(34, 41, 32, 0.06);
            --shadow-2: 0 4px 18px rgba(34, 41, 32, 0.08), 0 12px 28px rgba(34, 41, 32, 0.06);
            --shadow-3: 0 10px 40px rgba(34, 41, 32, 0.10), 0 20px 60px rgba(34, 41, 32, 0.08);

            --ring: 0 0 0 3px color-mix(in oklab, var(--soft-white) 60%, transparent), 0 0 0 5px color-mix(in srgb, var(--secondary-sage), #2F3A2B 15%);

            --ease-ambient: cubic-bezier(.2,.8,.2,1);
            --dur-1: 120ms;
            --dur-2: 200ms;
            --dur-3: 320ms;

            --target-min: 44px;
            --container-max: clamp(720px, 64vw, 1080px);
            --workspace-max: 1500px;
        }

        /* ------------------------------- Global reset / mobile stability ----------------------------------*/
        *, *::before, *::after { box-sizing: border-box; }
        html { -webkit-text-size-adjust: 100%; text-size-adjust: 100%; hanging-punctuation: first last; }
        html, body {
            margin: 0; padding: 0; width: 100%; min-height: 100dvh;
            font-family: var(--font-body); font-size: var(--step-0); line-height: 1.6;
            color: var(--forest-shadow);
            background: radial-gradient(1200px 1200px at -10% -10%, #FFFFFF 0%, transparent 50%),
                        radial-gradient(1200px 1000px at 110% 10%, #FFF8F0 0%, transparent 50%),
                        linear-gradient(135deg, #F8F6F0 0%, #F5F3ED 100%);
            -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; text-rendering: optimizeLegibility; overflow-x: hidden;
        }
        @media (prefers-reduced-motion: no-preference) { html { scroll-behavior: smooth; } }
        :where(p, h1, h2, h3, h4, h5, h6) { text-wrap: pretty; overflow-wrap: anywhere; }
        img, svg, video, canvas, audio, iframe { display: block; max-width: 100%; height: auto; }
        a { color: var(--primary-sage); text-decoration-thickness: 1px; text-underline-offset: 2px; }
        a:hover { color: var(--deep-forest); }
        .visually-hidden { position: absolute !important; height: 1px; width: 1px; overflow: hidden; clip: rect(1px, 1px, 1px, 1px); white-space: nowrap; }

        /* ------------------------------- App shell ----------------------------------*/
        #app-wrapper {
            display: flex; justify-content: center; align-items: stretch;
            padding: max(var(--space-7), env(safe-area-inset-top)) var(--space-4) var(--space-7);
            width: 100%; min-height: 100dvh;
            background: radial-gradient(800px 600px at 20% 0%, rgba(156,175,136,0.08) 0%, transparent 70%),
                        radial-gradient(700px 500px at 80% 100%, rgba(90,107,82,0.06) 0%, transparent 65%);
        }
        .skip-link {
            position: absolute;
            top: var(--space-3);
            left: 50%;
            transform: translate(-50%, -150%);
            background: var(--forest-shadow);
            color: #fff;
            padding: var(--space-2) var(--space-4);
            border-radius: var(--radius-sm);
            font-weight: 700;
            z-index: 1000;
            transition: transform var(--dur-1) var(--ease-ambient);
        }
        .skip-link:focus {
            transform: translate(-50%, 0);
        }
        #activity-shell {
            width: min(100%, var(--workspace-max));
            display: flex;
            flex-direction: column;
            gap: var(--space-6);
        }
        #activity-container {
            width: 100%; max-width: var(--container-max);
            background: color-mix(in srgb, var(--soft-white) 88%, white 12%);
            padding: clamp(24px, 3.2vw, 48px); border-radius: var(--radius-lg);
            border: 1px solid rgba(122, 132, 113, 0.12); box-shadow: var(--shadow-2);
            position: relative; isolation: isolate; container-type: inline-size;
        }
        @supports (backdrop-filter: blur(6px)) {
            #activity-container {
                background: color-mix(in srgb, var(--soft-white) 76%, white 24%);
                backdrop-filter: blur(6px) saturate(1.02);
            }
        }
        #activity-container::before {
            content: ""; position: absolute; inset: -1px; border-radius: inherit;
            background: radial-gradient(1200px 200px at 50% -5%, rgba(156,175,136,0.12), transparent 60%),
                        radial-gradient(800px 1000px at 50% 110%, rgba(122,132,113,0.08), transparent 70%);
            z-index: -1; pointer-events: none;
        }
        .screen { display: none; scroll-margin-top: clamp(90px, 12vh, 140px); } /* Hide screens initially */
        .screen.active { display: block; } /* Show active screen */

        /* ------------------------------- Interactive annotations ----------------------------------*/
        .highlight-annotation {
            background: color-mix(in srgb, var(--secondary-sage) 35%, white 65%);
            border-radius: var(--radius-sm);
            padding: 0 0.15em;
            cursor: pointer;
            transition: box-shadow var(--dur-1) var(--ease-ambient), background-color var(--dur-1) var(--ease-ambient);
            box-shadow: inset 0 -0.35em 0 rgba(198, 170, 119, 0.35);
            outline: none;
        }
        .highlight-annotation:focus-visible,
        .highlight-annotation:hover {
            box-shadow: inset 0 -0.35em 0 rgba(122, 132, 113, 0.4);
            background: color-mix(in srgb, var(--secondary-sage) 45%, white 55%);
        }
        .highlight-annotation[aria-expanded="true"] {
            box-shadow: inset 0 -0.35em 0 rgba(90, 107, 82, 0.45);
        }

        #highlight-toolbar {
            position: absolute;
            display: flex;
            align-items: center;
            gap: var(--space-2);
            padding: var(--space-2) var(--space-3);
            background: var(--soft-white);
            border: 1px solid var(--border-sage);
            border-radius: var(--radius-sm);
            box-shadow: var(--shadow-1);
            transform: translate(-50%, -120%);
            z-index: 2000;
            min-width: max-content;
        }
        #highlight-toolbar[hidden] {
            display: none;
        }
        .highlight-toolbar__btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-2);
            font: inherit;
            background: var(--secondary-sage);
            color: white;
            border: none;
            border-radius: var(--radius-sm);
            padding: var(--space-2) var(--space-4);
            cursor: pointer;
            transition: background-color var(--dur-1) var(--ease-ambient), transform var(--dur-1) var(--ease-ambient);
        }
        .highlight-toolbar__btn:hover,
        .highlight-toolbar__btn:focus-visible {
            background: var(--forest-shadow);
        }
        .highlight-toolbar__btn:active {
            transform: scale(0.97);
        }

        .annotation-popover {
            position: absolute;
            max-width: min(320px, 80vw);
            padding: var(--space-4);
            background: var(--soft-white);
            border-radius: var(--radius);
            border: 1px solid var(--border-sage);
            box-shadow: var(--shadow-2);
            z-index: 2100;
            transform: translate(-50%, 0);
        }
        .annotation-popover[hidden] {
            display: none;
        }
        .annotation-popover::before {
            content: "";
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            border-width: 0 10px 10px 10px;
            border-style: solid;
            border-color: transparent transparent var(--soft-white) transparent;
        }
        .annotation-popover__close {
            background: none;
            border: none;
            color: var(--forest-shadow);
            position: absolute;
            top: var(--space-2);
            right: var(--space-2);
            cursor: pointer;
            padding: var(--space-1);
            border-radius: var(--radius-sm);
        }
        .annotation-popover__close:hover,
        .annotation-popover__close:focus-visible {
            background: var(--hover-sage);
        }
        .annotation-popover__body {
            margin: 0;
            font-size: var(--step-0);
            color: var(--forest-shadow);
        }

        .annotation-composer {
            position: absolute;
            width: min(340px, 82vw);
            padding: var(--space-4);
            background: var(--soft-white);
            border-radius: var(--radius);
            border: 1px solid var(--border-sage);
            box-shadow: var(--shadow-2);
            z-index: 2050;
            transform: translate(-50%, 0);
        }
        .annotation-composer[hidden] {
            display: none;
        }
        .annotation-composer__label {
            display: block;
            font-weight: 700;
            margin-bottom: var(--space-2);
            color: var(--forest-shadow);
        }
        .annotation-composer__input {
            width: 100%;
            min-height: 96px;
            padding: var(--space-3);
            border-radius: var(--radius-sm);
            border: 1px solid var(--border-sage);
            font: inherit;
            resize: vertical;
            background: color-mix(in srgb, var(--soft-white) 92%, white 8%);
            color: var(--forest-shadow);
        }
        .annotation-composer__input:focus-visible {
            outline: none;
            box-shadow: var(--ring);
            border-color: var(--secondary-sage);
        }
        .annotation-composer__actions {
            display: flex;
            justify-content: flex-end;
            gap: var(--space-2);
            margin-top: var(--space-3);
        }
        .annotation-composer__btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-2);
            font: inherit;
            padding: var(--space-2) var(--space-4);
            border-radius: var(--radius-sm);
            border: none;
            cursor: pointer;
            transition: background-color var(--dur-1) var(--ease-ambient), transform var(--dur-1) var(--ease-ambient);
        }
        .annotation-composer__btn:hover,
        .annotation-composer__btn:focus-visible {
            transform: translateY(-1px);
        }
        .annotation-composer__btn:active {
            transform: scale(0.97);
        }
        .annotation-composer__btn--primary {
            background: var(--secondary-sage);
            color: white;
        }
        .annotation-composer__btn--primary:hover,
        .annotation-composer__btn--primary:focus-visible {
            background: var(--forest-shadow);
        }
        .annotation-composer__btn--secondary {
            background: transparent;
            color: var(--forest-shadow);
            border: 1px solid var(--border-sage);
        }
        .annotation-composer__btn--secondary:hover,
        .annotation-composer__btn--secondary:focus-visible {
            background: var(--hover-sage);
        }

        /* ------------------------------- Headings / text ----------------------------------*/
        h1 {
            font-family: var(--font-display); font-size: var(--step-4); letter-spacing: 0.2px;
            color: var(--forest-shadow); margin: 0 0 var(--space-2) 0; text-align: center;
        }
        h2.rubric {
            font-family: var(--font-body); font-size: var(--step-0); font-weight: 500;
            color: var(--secondary-sage); margin: 0 0 var(--space-6) 0; text-align: center; line-height: 1.5;
        }
        h3 {
            font-family: var(--font-display); font-size: var(--step-2); color: var(--forest-shadow);
            margin: var(--space-6) 0 var(--space-3) 0;
        }

        .presentation-header {
            position: sticky;
            top: 0;
            z-index: 2;
            background: linear-gradient(180deg, rgba(248, 246, 240, 0.92) 0%, rgba(248, 246, 240, 0.65) 85%, transparent 100%);
            backdrop-filter: blur(6px);
            padding: clamp(16px, 2vw, 24px);
            margin: calc(var(--space-6) * -1) calc(clamp(24px, 3.2vw, 48px) * -1) var(--space-4);
            border-radius: var(--radius-lg) var(--radius-lg) 0 0;
            border-bottom: 1px solid rgba(122, 132, 113, 0.12);
            box-shadow: 0 10px 25px rgba(62, 74, 58, 0.12);
        }
        .presentation-header .presentation-eyebrow {
            font-size: var(--step--1);
            font-weight: 800;
            letter-spacing: 0.08em;
            text-transform: uppercase;
            color: var(--primary-sage);
            margin: 0 0 var(--space-3) 0;
        }
        .presentation-menu {
            border-radius: var(--radius-lg);
            border: 1px solid rgba(122, 132, 113, 0.16);
            background: rgba(255, 255, 255, 0.85);
            box-shadow: 0 8px 22px rgba(62, 74, 58, 0.12);
            overflow: hidden;
        }
        .presentation-menu[open] {
            box-shadow: 0 18px 36px rgba(62, 74, 58, 0.18);
        }
        .presentation-menu__summary {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: var(--space-3);
            padding: var(--space-4);
            list-style: none;
            cursor: pointer;
            font-weight: 700;
            font-size: var(--step-0);
            color: var(--forest-shadow);
        }
        .presentation-menu__summary::-webkit-details-marker { display: none; }
        .presentation-menu__summary:focus-visible {
            outline: none;
            box-shadow: var(--ring);
        }
        .presentation-menu__summary-icon {
            font-size: var(--step-1);
            color: var(--primary-sage);
        }
        .presentation-menu__summary-label {
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }
        .presentation-menu__summary-hint {
            font-size: var(--step--1);
            color: var(--ink-muted);
        }
        .presentation-menu__content {
            padding: 0 var(--space-4) var(--space-4);
            display: grid;
            gap: var(--space-5);
        }
        .presentation-menu__card,
        .presentation-menu__section {
            display: grid;
            gap: var(--space-3);
        }
        .presentation-menu__card {
            padding: var(--space-4);
            background: color-mix(in srgb, var(--soft-white) 92%, #fff 8%);
            border: 1px solid var(--border-sage);
            border-radius: var(--radius);
            box-shadow: var(--shadow-1);
            grid-column: 1 / -1;
        }
        .presentation-menu__card-text {
            display: grid;
            gap: var(--space-2);
        }
        .presentation-menu__heading {
            margin: 0;
            font-size: var(--step--1);
            font-weight: 800;
            letter-spacing: 0.08em;
            text-transform: uppercase;
            color: var(--primary-sage);
        }
        .presentation-menu__actions {
            display: flex;
            flex-wrap: wrap;
            gap: var(--space-3);
        }
        .presentation-menu__actions .activity-btn {
            min-height: 40px;
            padding: 8px 14px;
            font-size: 0.9rem;
            border-radius: 10px;
        }
        .presentation-menu__hint {
            margin: 0;
            font-size: var(--step--1);
            color: var(--ink-muted);
        }
        .presentation-menu__card .presentation-menu__hint {
            line-height: 1.5;
        }
        #slide-map { margin: 0; }
        #slide-map-list {
            display: flex;
            flex-direction: column;
            gap: var(--space-4);
            margin: 0;
            padding: 0;
            list-style: none;
        }
        .slide-map-group {
            display: flex;
            flex-direction: column;
            gap: var(--space-3);
        }
        .slide-map-group__title {
            margin: 0;
            font-size: var(--step-0);
            font-weight: 800;
            color: var(--forest-shadow);
            letter-spacing: 0.3px;
        }
        .slide-map-group__list {
            display: grid;
            gap: var(--space-2);
            margin: 0;
            padding: 0;
            list-style: none;
        }
        @container (min-width: 720px) {
            .slide-map-group__list {
                grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            }
        }
        .slide-map-item { min-width: 0; }
        .slide-map-button {
            border: 1px solid rgba(122, 132, 113, 0.25);
            background: rgba(255, 255, 255, 0.88);
            border-radius: var(--radius-sm);
            padding: var(--space-3);
            font-size: var(--step--1);
            font-weight: 600;
            color: var(--forest-shadow);
            cursor: pointer;
            display: grid;
            grid-template-columns: auto 1fr;
            align-items: center;
            gap: var(--space-3);
            width: 100%;
            min-height: var(--target-min);
            transition: transform var(--dur-1) var(--ease-ambient), box-shadow var(--dur-2) var(--ease-ambient), border-color var(--dur-2) var(--ease-ambient), background var(--dur-2) var(--ease-ambient);
            white-space: normal;
            overflow-wrap: anywhere;
            text-align: left;
        }
        .slide-map-button:hover,
        .slide-map-button:focus-visible {
            outline: none;
            transform: translateY(-1px);
            border-color: var(--secondary-sage);
            box-shadow: 0 6px 12px rgba(62, 74, 58, 0.15);
            background: color-mix(in srgb, var(--soft-white) 94%, white 6%);
        }
        .slide-map-item.is-active .slide-map-button {
            background: linear-gradient(180deg, color-mix(in srgb, var(--secondary-sage) 92%, white 8%), var(--secondary-sage));
            color: var(--soft-white);
            border-color: var(--secondary-sage);
            box-shadow: 0 6px 12px rgba(62, 74, 58, 0.18);
        }
        .slide-map-item.is-active .slide-map-button:hover,
        .slide-map-item.is-active .slide-map-button:focus-visible {
            transform: translateY(-1px);
        }
        .slide-map-button__number {
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 999px;
            background: color-mix(in srgb, var(--secondary-sage) 25%, white 75%);
            color: var(--forest-shadow);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 0.95rem;
            letter-spacing: 0.3px;
        }
        .slide-map-button__label {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }
        .slide-map-button__title {
            font-size: var(--step--1);
            font-weight: 700;
            color: inherit;
        }
        .slide-map-button__subtitle {
            font-size: 0.85rem;
            color: var(--ink-muted);
        }
        .slide-map-item.is-active .slide-map-button__number {
            background: color-mix(in srgb, var(--soft-white) 20%, var(--forest-shadow) 80%);
            color: var(--soft-white);
        }

        /* ------------------------------- Buttons ----------------------------------*/
        .activity-btn {
            min-height: var(--target-min); padding: 12px 20px; border-radius: 12px;
            border: 1px solid var(--primary-sage);
            background: linear-gradient(180deg, color-mix(in srgb, var(--primary-sage) 92%, white 8%), var(--primary-sage));
            color: #fff; font-weight: 700; font-size: 1rem; letter-spacing: 0.2px; cursor: pointer;
            text-decoration: none; display: inline-flex; align-items: center; justify-content: center; gap: 0.5rem;
            -webkit-tap-highlight-color: transparent; touch-action: manipulation; user-select: none;
            transition: transform var(--dur-1) var(--ease-ambient), box-shadow var(--dur-2) var(--ease-ambient), background var(--dur-2) var(--ease-ambient), border-color var(--dur-2) var(--ease-ambient), opacity var(--dur-1) var(--ease-ambient);
            box-shadow: 0 1px 0 rgba(255,255,255,0.25) inset, 0 8px 16px rgba(90, 107, 82, 0.20);
        }
        .activity-btn:hover {
            background: linear-gradient(180deg, color-mix(in srgb, var(--forest-shadow) 92%, white 8%), var(--forest-shadow));
            transform: translateY(-1px); box-shadow: 0 1px 0 rgba(255,255,255,0.25) inset, 0 10px 20px rgba(90, 107, 82, 0.22);
        }
        .activity-btn:active {
            transform: translateY(0); box-shadow: 0 1px 0 rgba(255,255,255,0.2) inset, 0 4px 10px rgba(90, 107, 82, 0.20);
        }
        .activity-btn:focus-visible { outline: none; box-shadow: var(--ring), 0 8px 16px rgba(90, 107, 82, 0.20); }
        .activity-btn:disabled, .activity-btn[disabled] {
            background: var(--tertiary-sage); border-color: var(--tertiary-sage);
            color: color-mix(in srgb, #fff 70%, var(--soft-white) 30%); cursor: not-allowed; opacity: 0.8; transform: none; box-shadow: none;
        }
        .activity-btn.secondary {
            background: transparent; color: var(--primary-sage); border-color: color-mix(in srgb, var(--tertiary-sage) 70%, var(--primary-sage) 30%); box-shadow: none;
        }
        .activity-btn.secondary:hover { background-color: var(--hover-sage); }
        .activity-btn.secondary:focus-visible { outline: none; box-shadow: var(--ring); }
        .controls { margin-top: var(--space-7); text-align: center; display: grid; gap: var(--space-3); grid-auto-flow: row; }

        /* ------------------------------- Forms / inputs ----------------------------------*/
        .input-group { margin: var(--space-6) 0; }
        .input-group label { display: block; font-weight: 700; margin-bottom: var(--space-2); color: var(--primary-sage); letter-spacing: 0.2px; }
        input[type="text"], input[type="date"], textarea, select {
            width: 100%; min-height: var(--target-min); padding: 12px 14px; border-radius: 10px;
            border: 1px solid var(--tertiary-sage); background: #fff; font-size: 1rem; font-family: var(--font-body);
            color: var(--ink); box-shadow: 0 1px 0 rgba(255,255,255,0.6) inset; appearance: none; -webkit-appearance: none;
            transition: border-color var(--dur-2) var(--ease-ambient), box-shadow var(--dur-2) var(--ease-ambient), background var(--dur-2) var(--ease-ambient);
        }
        input::placeholder, textarea::placeholder { color: color-mix(in srgb, var(--ink-muted) 60%, #fff 40%); opacity: 0.9; }
        input:focus-visible, textarea:focus-visible, select:focus-visible {
            outline: none; border-color: var(--secondary-sage); box-shadow: var(--ring);
            background: color-mix(in srgb, #fff 92%, var(--warm-cream) 8%);
        }
        input:disabled, textarea:disabled, select:disabled {
            background: color-mix(in srgb, #fff 85%, var(--warm-cream) 15%); color: var(--ink-muted); cursor: not-allowed;
        }
        input[type="date"] { -webkit-tap-highlight-color: transparent; }
        textarea { resize: vertical; }
        :root { accent-color: var(--primary-sage); }

        /* ------------------------------- Responsive / container queries ----------------------------------*/
        @media (min-width: 768px) {
            #app-wrapper { padding-inline: var(--space-7); }
            .controls { grid-auto-flow: column; justify-content: center; }
            .presentation-menu__content { grid-template-columns: repeat(2, minmax(0, 1fr)); }
            .presentation-menu__actions { justify-content: flex-start; }
        }
        @media (min-width: 1024px) {
            #activity-container { box-shadow: var(--shadow-3); }
            h1 { letter-spacing: 0.3px; }
            .presentation-header { padding: clamp(20px, 2.4vw, 32px) clamp(28px, 3.2vw, 48px); margin: calc(var(--space-6) * -1) calc(clamp(28px, 3.2vw, 48px) * -1) var(--space-5); }
            #slide-map-list { gap: var(--space-4); }
        }
        @media (max-width: 767px) {
            #app-wrapper { padding: var(--space-4); }
            #activity-container { padding: 24px; }
            h1 { font-size: clamp(1.75rem, 5vw, 2rem); }
            h2.rubric { font-size: var(--step--1); margin-bottom: 20px; }
            .slide-map-button { padding-inline: var(--space-3); }
        }

        /* ------------------------------- Accessibility / motion / scroll ----------------------------------*/
        :focus-visible { outline: none; box-shadow: var(--ring); }
        @media (prefers-reduced-motion: reduce) { * { animation: none !important; transition: none !important; scroll-behavior: auto !important; } }
        ::selection { background: color-mix(in srgb, var(--secondary-sage) 30%, #fff 70%); color: var(--deep-forest); }
        html, body { overscroll-behavior-y: none; }

        /* ------------------------------- Scrollbars (subtle, optional) ----------------------------------*/
        *::-webkit-scrollbar { width: 10px; height: 10px; }
        *::-webkit-scrollbar-thumb { background: color-mix(in srgb, var(--primary-sage) 50%, var(--tertiary-sage) 50%); border-radius: 999px; border: 2px solid transparent; background-clip: padding-box; }
        *::-webkit-scrollbar-track { background: transparent; }

        /* ------------------------------- Dark mode (gentle, earthy) ----------------------------------*/
        @media (prefers-color-scheme: dark) {
            :root {
                --soft-white: #1E211C; --warm-cream: #23261F; --forest-shadow: #DDE6D4;
                --ink: #E9EFE5; --ink-muted: #AEB9AA; --border-sage: rgba(184, 197, 166, 0.25);
            }
            html, body {
                background: radial-gradient(1100px 900px at 15% 10%, rgba(156,175,136,0.06), transparent 60%),
                            radial-gradient(900px 900px at 85% 90%, rgba(122,132,113,0.08), transparent 65%),
                            linear-gradient(135deg, #191D18 0%, #1B1E19 100%);
            }
            #activity-container { background: color-mix(in srgb, #23261F 92%, #1B1E19 8%); border-color: rgba(184, 197, 166, 0.18); box-shadow: 0 12px 36px rgba(0,0,0,0.35); }
            .presentation-header { background: linear-gradient(180deg, rgba(31, 33, 28, 0.92) 0%, rgba(31, 33, 28, 0.6) 85%, transparent 100%); border-bottom-color: rgba(184, 197, 166, 0.2); }
            .presentation-menu { background: rgba(28, 31, 26, 0.88); border-color: rgba(184, 197, 166, 0.28); box-shadow: 0 16px 32px rgba(0,0,0,0.35); }
            .presentation-menu__summary { color: var(--forest-shadow); }
            .presentation-menu__summary-icon { color: color-mix(in srgb, var(--secondary-sage) 80%, #0F120E 20%); }
            .presentation-menu__hint { color: color-mix(in srgb, var(--ink-muted) 85%, #fff 15%); }
            a { color: color-mix(in srgb, var(--secondary-sage) 80%, #C7D3C0 20%); }
            .mc-question { background: linear-gradient(180deg, #20241E 0%, #191D18 100%); border-color: rgba(184, 197, 166, 0.20); box-shadow: 0 1px 0 rgba(255,255,255,0.03) inset, 0 10px 30px rgba(0,0,0,0.35); }
            .activity-btn { background: linear-gradient(180deg, color-mix(in srgb, var(--primary-sage) 80%, #0F120E 20%), var(--primary-sage)); box-shadow: 0 1px 0 rgba(255,255,255,0.08) inset, 0 8px 18px rgba(0,0,0,0.35); }
            .activity-btn:hover { background: linear-gradient(180deg, color-mix(in srgb, var(--forest-shadow) 80%, #0F120E 20%), var(--forest-shadow)); }
            input, textarea, select { background: #141713; border-color: rgba(184, 197, 166, 0.25); color: var(--ink); }
            .notes-dock-header { background: rgba(28, 31, 26, 0.78); border-color: rgba(184, 197, 166, 0.28); box-shadow: 0 12px 28px rgba(0,0,0,0.35); }
            .notes-dock-subtitle { color: color-mix(in srgb, var(--ink-muted) 85%, #fff 15%); }
            .slide-map-group__title { color: color-mix(in srgb, var(--secondary-sage) 70%, #C7D3C0 30%); }
            .slide-map-button { background: rgba(28, 31, 26, 0.75); border-color: rgba(184, 197, 166, 0.28); color: var(--forest-shadow); }
            .slide-map-button__number { background: color-mix(in srgb, var(--secondary-sage) 55%, #0F120E 45%); color: var(--soft-white); }
            .slide-map-button__subtitle { color: color-mix(in srgb, var(--ink-muted) 80%, #fff 20%); }
            .slide-map-item.is-active .slide-map-button { background: linear-gradient(180deg, color-mix(in srgb, var(--secondary-sage) 85%, #0F120E 15%), var(--secondary-sage)); color: var(--soft-white); border-color: color-mix(in srgb, var(--secondary-sage) 85%, #0F120E 15%); }
            .slide-map-item.is-active .slide-map-button__number { background: color-mix(in srgb, var(--soft-white) 15%, var(--forest-shadow) 85%); }
            .textbox-color-picker { background: rgba(28, 31, 26, 0.75); border-color: rgba(184, 197, 166, 0.28); }
            .textbox-color-picker__swatch { border-color: rgba(184, 197, 166, 0.28); }
            .textbox-color-picker__swatch.is-selected { box-shadow: 0 0 0 3px rgba(20, 23, 19, 0.85), 0 0 0 5px rgba(184, 197, 166, 0.35); }
        }

        /* ------------------------------- Slide-specific styles ----------------------------------*/
        /* Custom styles for the presentation content */
        .slide-content { margin-top: var(--space-6); }
        .slide-content img {
            width: 100%;
            height: 250px;
            object-fit: cover;
            border-radius: var(--radius);
            margin-bottom: var(--space-6);
        }
        .slide-list {
            list-style: none;
            padding-left: 0;
            margin-bottom: var(--space-6);
        }
        .slide-list li {
            position: relative;
            padding-left: var(--space-7);
            margin-bottom: var(--space-4);
            font-size: var(--step-1);
            line-height: 1.5;
        }
        .slide-list li::before {
            content: "";
            position: absolute;
            left: 0;
            top: var(--space-1);
            width: var(--space-3);
            height: var(--space-3);
            background-color: var(--primary-sage);
            border-radius: 50%;
        }
        .slide-list.smart li::before {
            content: attr(data-letter);
            background-color: var(--secondary-sage);
            color: var(--soft-white);
            font-weight: 700;
            font-size: var(--step--1);
            text-align: center;
            line-height: var(--space-7);
        }
        .process-flow {
            display: grid;
            gap: var(--space-4);
        }
        .process-step {
            display: flex;
            align-items: center;
            gap: var(--space-4);
            padding: var(--space-4);
            border-radius: var(--radius-sm);
            border: 1px solid var(--border-sage);
            background: #fff;
        }
        .process-step-number {
            font-family: var(--font-display);
            font-size: var(--step-3);
            color: var(--primary-sage);
            font-weight: 700;
            flex-shrink: 0;
            width: 50px;
            text-align: center;
        }
        .process-step-content {
            font-size: var(--step-0);
        }
        .process-step-content strong { color: var(--forest-shadow); }

        /* Navigation controls styling */
        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: var(--space-7);
        }
        .navigation button {
            width: 150px;
        }
        .navigation button:first-child { justify-content: flex-start; }
        .navigation button:last-child { justify-content: flex-end; }

        .slide-content p { margin-bottom: var(--space-4); }
        .slide-content ul { padding-left: var(--space-6); }
        .slide-content ul li { margin-bottom: var(--space-2); }
        
        .card-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--space-4);
            margin-top: var(--space-6);
        }
        .card {
            background: #fff;
            border: 1px solid var(--border-sage);
            border-radius: var(--radius);
            padding: var(--space-5);
            box-shadow: var(--shadow-1);
            text-align: center;
        }
        .card .icon {
            font-size: var(--step-3);
            color: var(--primary-sage);
            margin-bottom: var(--space-3);
        }
        .card h3 {
            font-size: var(--step-1);
            margin: 0;
        }
        .quiz-card {
            background: var(--warm-cream);
            border: 1px solid var(--border-sage);
            border-radius: var(--radius);
            padding: var(--space-5);
            margin-bottom: var(--space-5);
            display: flex;
            flex-direction: column;
            gap: var(--space-4);
        }
        .quiz-question-text {
            font-weight: 700;
            font-size: var(--step-1);
            color: var(--forest-shadow);
            margin: 0;
        }
        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: var(--space-3);
        }
        .quiz-option {
            display: flex;
            align-items: flex-start;
            gap: var(--space-3);
            padding: var(--space-3);
            border: 1px solid rgba(122, 132, 113, 0.18);
            border-radius: var(--radius-sm);
            background: color-mix(in srgb, var(--soft-white) 92%, white 8%);
            transition: background var(--dur-2) var(--ease-ambient), transform var(--dur-1) var(--ease-ambient);
        }
        .quiz-option:hover {
            background: var(--hover-sage);
            transform: translateY(-1px);
        }
        .quiz-option input[type="radio"] {
            margin-top: 4px;
        }
        .quiz-option span {
            flex: 1;
        }
        .activity-btn.quiz-btn {
            align-self: flex-start;
            background: linear-gradient(180deg, color-mix(in srgb, var(--secondary-sage) 92%, white 8%), var(--secondary-sage));
            border-color: var(--secondary-sage);
            color: var(--soft-white);
        }
        .activity-btn.quiz-btn:hover {
            background: linear-gradient(180deg, color-mix(in srgb, var(--forest-shadow) 88%, white 12%), var(--forest-shadow));
        }
        .quiz-feedback {
            margin: 0;
            font-weight: 600;
        }
        .quiz-feedback.correct {
            color: var(--secondary-sage);
        }
        .quiz-feedback.incorrect {
            color: #C4665A;
        }
        .quiz-feedback.notice {
            color: var(--forest-shadow);
        }
        .reflection-form {
            display: grid;
            gap: var(--space-5);
        }
        .reflection-field label {
            display: block;
            font-weight: 700;
            color: var(--forest-shadow);
            margin-bottom: var(--space-2);
        }
        .reflection-field textarea {
            width: 100%;
            min-height: 120px;
            padding: var(--space-4);
            border-radius: var(--radius-sm);
            border: 1px solid rgba(122, 132, 113, 0.28);
            background: color-mix(in srgb, var(--soft-white) 92%, white 8%);
            font-family: var(--font-body);
            font-size: var(--step-0);
            resize: vertical;
        }
        /* ------------------------------- Collaborative text boxes ----------------------------------*/
        #notes-dock {
            width: 100%;
            background: color-mix(in srgb, var(--soft-white) 90%, white 10%);
            border-radius: var(--radius-lg);
            border: 1px solid rgba(122, 132, 113, 0.14);
            box-shadow: var(--shadow-1);
            padding: clamp(20px, 2.8vw, 32px);
            display: flex;
            flex-direction: column;
            gap: var(--space-5);
            min-height: 0;
        }
        .notes-dock-header {
            display: grid;
            gap: var(--space-2);
            padding: var(--space-4);
            border-radius: var(--radius);
            border: 1px solid rgba(122, 132, 113, 0.16);
            background: color-mix(in srgb, var(--soft-white) 94%, white 6%);
            box-shadow: var(--shadow-1);
        }
        .notes-dock-title {
            margin: 0;
            font-family: var(--font-display);
            font-size: var(--step-1);
            color: var(--forest-shadow);
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }
        .notes-dock-subtitle {
            margin: 0;
            font-size: var(--step--1);
            color: var(--ink-muted);
        }
        #notes-panels {
            display: flex;
            flex-direction: column;
            gap: var(--space-4);
            flex: 1 1 auto;
            min-height: 0;
        }
        .notes-panel {
            display: none;
            flex-direction: column;
            gap: var(--space-4);
            background: color-mix(in srgb, var(--soft-white) 96%, white 4%);
            border: 1px solid rgba(122, 132, 113, 0.14);
            border-radius: var(--radius-lg);
            padding: var(--space-4);
            box-shadow: var(--shadow-1);
        }
        .notes-panel.active {
            display: flex;
        }
        .notes-panel-title {
            margin: 0;
            font-family: var(--font-display);
            font-size: var(--step-1);
            color: var(--forest-shadow);
        }
        .textbox-toolbar {
            margin-top: var(--space-6);
            margin-bottom: var(--space-3);
            padding: var(--space-3);
            border-radius: var(--radius-sm);
            border: 1px solid rgba(122, 132, 113, 0.18);
            background: color-mix(in srgb, var(--soft-white) 94%, white 6%);
            display: flex;
            flex-direction: column;
            gap: var(--space-3);
        }
        .textbox-swatch-group {
            display: flex;
            align-items: center;
            gap: var(--space-3);
        }
        .textbox-swatch-group button {
            width: 38px;
            height: 38px;
            border-radius: 50%;
            border: 2px solid rgba(62, 74, 58, 0.15);
            background: var(--swatch-color);
            cursor: pointer;
            transition: transform var(--dur-1) var(--ease-ambient), box-shadow var(--dur-2) var(--ease-ambient), border-color var(--dur-2) var(--ease-ambient);
        }
        .textbox-swatch-group button:hover {
            transform: translateY(-1px);
            border-color: rgba(62, 74, 58, 0.3);
            box-shadow: 0 6px 12px rgba(62, 74, 58, 0.15);
        }
        .textbox-swatch-group button:focus-visible {
            outline: none;
            box-shadow: var(--ring), 0 6px 12px rgba(62, 74, 58, 0.18);
        }
        .textbox-toolbar .toolbar-caption {
            margin: 0;
            font-size: var(--step--1);
            color: var(--ink-muted);
        }
        .notes-panel .textbox-toolbar {
            margin-top: 0;
            margin-bottom: 0;
        }
        .textbox-collection {
            display: grid;
            gap: var(--space-3);
        }
        .notes-panel .textbox-collection {
            min-width: 0;
        }
        .custom-textbox {
            position: relative;
            border-radius: var(--radius);
            padding: var(--space-4);
            box-shadow: var(--shadow-1);
            border: 1px solid rgba(0, 0, 0, 0.05);
            color: #1F2B1B;
        }
        .custom-textbox .textbox-content {
            min-height: 80px;
            outline: none;
            font-family: var(--font-body);
            font-size: var(--step-0);
            line-height: 1.5;
        }
        .custom-textbox .textbox-content:empty::before {
            content: attr(data-placeholder);
            color: rgba(47, 58, 43, 0.5);
        }
        .textbox-actions {
            display: flex;
            flex-wrap: wrap;
            gap: var(--space-3);
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--space-3);
        }
        .textbox-color-picker {
            display: inline-flex;
            align-items: center;
            gap: var(--space-2);
            padding: 6px 10px;
            border-radius: var(--radius-sm);
            border: 1px solid rgba(122, 132, 113, 0.18);
            background: rgba(255, 255, 255, 0.65);
        }
        .textbox-color-picker__swatch {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            border: 2px solid rgba(62, 74, 58, 0.18);
            background: var(--swatch-color);
            cursor: pointer;
            transition: transform var(--dur-1) var(--ease-ambient), box-shadow var(--dur-2) var(--ease-ambient), border-color var(--dur-2) var(--ease-ambient);
        }
        .textbox-color-picker__swatch:hover {
            transform: translateY(-1px);
            border-color: rgba(62, 74, 58, 0.32);
            box-shadow: 0 6px 12px rgba(62, 74, 58, 0.16);
        }
        .textbox-color-picker__swatch:focus-visible {
            outline: none;
            box-shadow: var(--ring), 0 6px 12px rgba(62, 74, 58, 0.2);
        }
        .textbox-color-picker__swatch.is-selected {
            border-color: rgba(62, 74, 58, 0.45);
            box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.8), 0 0 0 5px rgba(62, 74, 58, 0.25);
        }
        .textbox-remove-btn {
            border: none;
            background: transparent;
            color: var(--forest-shadow);
            font-weight: 700;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }
        .textbox-remove-btn:hover {
            color: #C4665A;
        }
        @media (max-width: 767px) {
            .textbox-toolbar {
                align-items: stretch;
            }
            .textbox-swatch-group {
                flex-wrap: wrap;
            }
            .textbox-actions {
                flex-direction: column;
                align-items: stretch;
            }
            .textbox-remove-btn {
                justify-content: center;
            }
        }
        @media (min-width: 992px) {
            #activity-shell {
                flex-direction: row;
                align-items: flex-start;
                gap: var(--space-7);
            }
            #activity-container {
                flex: 1 1 auto;
                max-width: none;
            }
            #notes-dock {
                flex: 0 0 clamp(280px, 30vw, 360px);
                position: sticky;
                top: clamp(1.5rem, 4vw, 3rem);
                max-height: calc(100vh - clamp(1.5rem, 4vw, 3rem));
                overflow: hidden;
            }
            #notes-panels {
                overflow: auto;
                padding-right: var(--space-1);
            }
        }
        .animate-on-scroll {
            opacity: 0;
        }
    </style>
</head>
<body>

    <a class="skip-link" href="#activity-container">Skip to presentation content</a>

    <div id="app-wrapper">
        <main id="activity-shell" role="main">
            <div id="activity-container">

            <header class="presentation-header" id="presentation-header">
                <p class="presentation-eyebrow">Noor Community Mentoring</p>
                <details class="presentation-menu" id="notes-io-controls" open>
                    <summary class="presentation-menu__summary">
                        <span class="presentation-menu__summary-label">
                            <i class="fas fa-seedling presentation-menu__summary-icon" aria-hidden="true"></i>
                            Session tools
                        </span>
                        <span class="presentation-menu__summary-hint">Slide map &amp; notes backup</span>
                    </summary>
                    <div class="presentation-menu__content">
                        <section class="presentation-menu__card" aria-labelledby="presentation-notes-io-heading">
                            <div class="presentation-menu__card-text">
                                <h2 class="presentation-menu__heading" id="presentation-notes-io-heading">Save or load notes</h2>
                                <p class="presentation-menu__hint">Download your current slide text boxes or import a saved copy.</p>
                            </div>
                            <div class="presentation-menu__actions">
                                <button type="button" class="activity-btn secondary" id="save-notes-btn"><i class="fas fa-file-arrow-down"></i> Save Notes (JSON)</button>
                                <button type="button" class="activity-btn secondary" id="load-notes-btn"><i class="fas fa-file-arrow-up"></i> Load Notes (JSON)</button>
                            </div>
                            <input type="file" id="notes-file-input" accept="application/json" hidden>
                        </section>
                        <section class="presentation-menu__section" aria-labelledby="presentation-slide-map-heading">
                            <h2 class="presentation-menu__heading" id="presentation-slide-map-heading">Slide map</h2>
                            <nav id="slide-map" aria-label="Slide overview">
                                <ul id="slide-map-list"></ul>
                            </nav>
                        </section>
                    </div>
                </details>
            </header>

            <!-- Slide 1: Title Slide -->
            <div id="slide-1" class="screen active">
                <div class="animate-on-scroll">
                    <img src="https://images.pexels.com/photos/3184418/pexels-photo-3184418.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" alt="Diverse team collaborating in a bright, modern office">
                    <h1 class="slide-title">Welcome to the Noor Community Mentoring Program</h1>
                </div>
                <div class="animate-on-scroll">
                    <h2 class="rubric">Building a supportive future, together.</h2>
                </div>
                <div class="controls animate-on-scroll">
                    <button class="activity-btn" onclick="nextSlide()"><i class="fas fa-play"></i> Start</button>
                </div>
            </div>
            
            <!-- Slide 2: Benefits of Mentoring (Soft Skills) -->
            <div id="slide-2" class="screen">
                <div class="animate-on-scroll">
                    <h1 class="slide-title"><i class="fas fa-cogs"></i> Benefits of Mentoring (Soft Skills)</h1>
                </div>
                <div class="slide-content">
                    <img src="https://images.pexels.com/photos/1595385/pexels-photo-1595385.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" alt="A group of people collaborating and brainstorming on a project">
                    <p class="animate-on-scroll">Mentoring is a powerful tool for personal and professional growth. It can help you develop a wide range of soft skills that are essential for success in any field.</p>
                    <ul class="slide-list">
                        <li class="animate-on-scroll">Improved communication and interpersonal skills</li>
                        <li class="animate-on-scroll">Enhanced leadership and decision-making abilities</li>
                        <li class="animate-on-scroll">Increased confidence and self-awareness</li>
                        <li class="animate-on-scroll">Greater problem-solving and critical thinking skills</li>
                    </ul>
                </div>
                <div class="controls animate-on-scroll">
                    <button class="activity-btn secondary" onclick="prevSlide()"><i class="fas fa-arrow-left"></i> Back</button>
                    <button class="activity-btn" onclick="nextSlide()">Next <i class="fas fa-arrow-right"></i></button>
                </div>
            </div>

            <!-- Slide 3: Community Identity -->
            <div id="slide-3" class="screen">
                <div class="animate-on-scroll">
                    <h1 class="slide-title"><i class="fas fa-users"></i> Who Are We?</h1>
                </div>
                <div class="slide-content">
                    <img src="https://images.pexels.com/photos/3183150/pexels-photo-3183150.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" alt="A diverse group of colleagues celebrating a success together">
                    <p class="animate-on-scroll">The Noor Community is an educational space dedicated to liberation through learning. We believe in solidarity and social justice.</p>
                    <p class="animate-on-scroll">Our goal is to create a safe environment where everyone can express themselves, develop their skills, and connect with others. We believe that learning and teaching are universal processes that empower us all.</p>
                </div>
                <div class="controls animate-on-scroll">
                    <button class="activity-btn secondary" onclick="prevSlide()"><i class="fas fa-arrow-left"></i> Back</button>
                    <button class="activity-btn" onclick="nextSlide()">Next <i class="fas fa-arrow-right"></i></button>
                </div>
            </div>

            <!-- Slide 4: What is Mentoring? -->
            <div id="slide-4" class="screen">
                <div class="animate-on-scroll">
                    <h1 class="slide-title"><i class="fas fa-hands-helping"></i> What is Mentoring?</h1>
                </div>
                <div class="slide-content">
                    <img src="https://images.pexels.com/photos/5668859/pexels-photo-5668859.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" alt="A mentor guiding a mentee at a computer">
                    <p class="animate-on-scroll">Mentoring is a collaborative relationship where an experienced person (the mentor) guides another person (the mentee) to help them develop skills and achieve goals.</p>
                    <p class="animate-on-scroll">This program focuses on building a trusting relationship and empowering you to succeed in your chosen project. The mentor acts as a guide and supporter throughout your journey.</p>
                </div>
                <div class="controls animate-on-scroll">
                    <button class="activity-btn secondary" onclick="prevSlide()"><i class="fas fa-arrow-left"></i> Back</button>
                    <button class="activity-btn" onclick="nextSlide()">Next <i class="fas fa-arrow-right"></i></button>
                </div>
            </div>

            <!-- Slide 5: What is Possible? -->
            <div id="slide-5" class="screen">
                <div class="animate-on-scroll">
                    <h1 class="slide-title"><i class="fas fa-lightbulb"></i> What Is Possible for You?</h1>
                </div>
                <div class="animate-on-scroll">
                    <h2 class="rubric">Mentoring can help you achieve concrete, practical outcomes.</h2>
                </div>
                <div class="slide-content card-container">
                    <div class="card animate-on-scroll">
                        <div class="icon"><i class="fas fa-file-alt"></i></div>
                        <h3>CV & LinkedIn</h3>
                    </div>
                    <div class="card animate-on-scroll">
                        <div class="icon"><i class="fas fa-microphone"></i></div>
                        <h3>Public Speaking</h3>
                    </div>
                    <div class="card animate-on-scroll">
                        <div class="icon"><i class="fas fa-award"></i></div>
                        <h3>Grant Proposals</h3>
                    </div>
                    <div class="card animate-on-scroll">
                        <div class="icon"><i class="fas fa-graduation-cap"></i></div>
                        <h3>University Applications</h3>
                    </div>
                </div>
                <div class="controls animate-on-scroll">
                    <button class="activity-btn secondary" onclick="prevSlide()"><i class="fas fa-arrow-left"></i> Back</button>
                    <button class="activity-btn" onclick="nextSlide()">Next <i class="fas fa-arrow-right"></i></button>
                </div>
            </div>

            <!-- Slide 6 Quiz: Community & Mentoring Check -->
            <div id="slide-6" class="screen">
                <div class="animate-on-scroll">
                    <h1 class="slide-title"><i class="fas fa-question-circle"></i> Quick Check: Our Mission & Mentoring</h1>
                </div>
                <div class="slide-content">
                    <div class="quiz-card animate-on-scroll">
                        <p class="quiz-question-text">What is the Noor Community primarily committed to?</p>
                        <div class="quiz-options">
                            <label class="quiz-option">
                                <input type="radio" name="intro-q1" value="solidarity">
                                <span>Building solidarity and working toward social justice through education.</span>
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="intro-q1" value="competition">
                                <span>Organising competitive events that reward the top performers only.</span>
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="intro-q1" value="online-only">
                                <span>Delivering self-paced online courses without community interaction.</span>
                            </label>
                        </div>
                        <button class="activity-btn quiz-btn" type="button" onclick="checkSingleChoice('intro-q1','intro-q1-feedback','solidarity','Exactly! Our community centres solidarity and social justice.','Review our vision—connection and justice are at the heart of Noor Community.')">Check Answer</button>
                        <p class="quiz-feedback" id="intro-q1-feedback"></p>
                    </div>
                    <div class="quiz-card animate-on-scroll">
                        <p class="quiz-question-text">How does the mentoring relationship operate in this program?</p>
                        <div class="quiz-options">
                            <label class="quiz-option">
                                <input type="radio" name="intro-q2" value="hierarchy">
                                <span>The mentor gives orders and the mentee follows a fixed set of tasks.</span>
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="intro-q2" value="collaboration">
                                <span>Mentor and mentee collaborate to reach the mentee’s goals through trust and guidance.</span>
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="intro-q2" value="assessment">
                                <span>The mentor grades the mentee each week on quizzes and exams.</span>
                            </label>
                        </div>
                        <button class="activity-btn quiz-btn" type="button" onclick="checkSingleChoice('intro-q2','intro-q2-feedback','collaboration','Yes! Mentoring here is a collaborative, empowering partnership.','Remember—the mentor is a guide who supports, not a judge or taskmaster.')">Check Answer</button>
                        <p class="quiz-feedback" id="intro-q2-feedback"></p>
                    </div>
                </div>
                <div class="controls animate-on-scroll">
                    <button class="activity-btn secondary" onclick="prevSlide()"><i class="fas fa-arrow-left"></i> Back</button>
                    <button class="activity-btn" onclick="nextSlide()">Next <i class="fas fa-arrow-right"></i></button>
                </div>
            </div>

            <!-- Slide 7: Project Example 1: CV Development -->
            <div id="slide-7" class="screen">
                <div class="animate-on-scroll">
                    <h1 class="slide-title"><i class="fas fa-user-tie"></i> Project Example: Developing a CV</h1>
                </div>
                <div class="animate-on-scroll">
                    <h2 class="rubric">"I needed a strong CV to apply for work."</h2>
                </div>
                <div class="slide-content">
                    <img src="https://images.pexels.com/photos/590022/pexels-photo-590022.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" alt="A person writing a CV at a desk">
                    <div class="animate-on-scroll">
                        <p><strong>The Process:</strong> A student named Laila wanted to create a professional CV. Her mentor guided her through identifying her key skills and experiences. They worked together to choose powerful action verbs and structure her information clearly. The mentor reviewed her drafts and offered feedback on how to make her CV stand out.</p>
                    </div>
                    <div class="animate-on-scroll">
                        <p><strong>The Outcome:</strong> Laila now has a polished CV that clearly highlights her strengths. She feels confident using it to apply for new opportunities and has a better understanding of how to describe her skills to potential employers.</p>
                    </div>
                </div>
                <div class="controls animate-on-scroll">
                    <button class="activity-btn secondary" onclick="prevSlide()"><i class="fas fa-arrow-left"></i> Back</button>
                    <button class="activity-btn" onclick="nextSlide()">Next <i class="fas fa-arrow-right"></i></button>
                </div>
            </div>

            <!-- Slide 8: Project Example 2: Grant Proposal -->
            <div id="slide-8" class="screen">
                <div class="animate-on-scroll">
                    <h1 class="slide-title"><i class="fas fa-file-signature"></i> Project Example: Writing a Proposal</h1>
                </div>
                <div class="animate-on-scroll">
                    <h2 class="rubric">"I had a great idea, but I didn't know how to start."</h2>
                </div>
                <div class="slide-content">
                    <img src="https://images.pexels.com/photos/1181298/pexels-photo-1181298.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" alt="A person writing a proposal on a laptop">
                    <div class="animate-on-scroll">
                        <p><strong>The Process:</strong> Omar wanted to write a grant proposal for a community project. His mentor helped him understand the different sections required in a proposal. They worked on breaking down his idea into specific objectives and a detailed budget. The mentor also helped him refine his writing so that the proposal was persuasive and clear.</p>
                    </div>
                    <div class="animate-on-scroll">
                        <p><strong>The Outcome:</strong> Omar successfully completed a professional grant proposal. He learned how to structure complex documents and present his ideas logically. He now has a valuable asset to use for future funding applications.</p>
                    </div>
                </div>
                <div class="controls animate-on-scroll">
                    <button class="activity-btn secondary" onclick="prevSlide()"><i class="fas fa-arrow-left"></i> Back</button>
                    <button class="activity-btn" onclick="nextSlide()">Next <i class="fas fa-arrow-right"></i></button>
                </div>
            </div>

            <!-- Slide 9: Project Example 3: Public Speaking Skills -->
            <div id="slide-9" class="screen">
                <div class="animate-on-scroll">
                    <h1 class="slide-title"><i class="fas fa-podium-star"></i> Project Example: Public Speaking</h1>
                </div>
                <div class="animate-on-scroll">
                    <h2 class="rubric">"I was nervous about giving presentations."</h2>
                </div>
                <div class="slide-content">
                    <img src="https://images.pexels.com/photos/1181406/pexels-photo-1181406.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" alt="A person giving a presentation to an audience">
                    <div class="animate-on-scroll">
                        <p><strong>The Process:</strong> Mariam's goal was to improve her public speaking skills for university presentations. Her mentor helped her practice her delivery and organize her presentation content. The mentor provided a safe space for Mariam to practice, focusing on techniques for managing nervousness and speaking clearly. They used a recording tool to review her progress together.</p>
                    </div>
                    <div class="animate-on-scroll">
                        <p><strong>The Outcome:</strong> Mariam successfully delivered her presentation to her class. She now feels significantly more confident in front of an audience and has a clear plan for preparing future talks.</p>
                    </div>
                </div>
                <div class="controls animate-on-scroll">
                    <button class="activity-btn secondary" onclick="prevSlide()"><i class="fas fa-arrow-left"></i> Back</button>
                    <button class="activity-btn" onclick="nextSlide()">Next <i class="fas fa-arrow-right"></i></button>
                </div>
            </div>

            <!-- Slide 10 Quiz: Project Examples Review -->
            <div id="slide-10" class="screen">
                <div class="animate-on-scroll">
                    <h1 class="slide-title"><i class="fas fa-clipboard-check"></i> Quick Check: Project Stories</h1>
                </div>
                <div class="slide-content">
                    <div class="quiz-card animate-on-scroll">
                        <p class="quiz-question-text">Who worked with a mentor to turn a community idea into a grant proposal?</p>
                        <div class="quiz-options">
                            <label class="quiz-option">
                                <input type="radio" name="projects-q1" value="laila">
                                <span>Laila, who focused on crafting a compelling CV.</span>
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="projects-q1" value="omar">
                                <span>Omar, who needed help structuring and writing a persuasive proposal.</span>
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="projects-q1" value="mariam">
                                <span>Mariam, who practised delivering university presentations.</span>
                            </label>
                        </div>
                        <button class="activity-btn quiz-btn" type="button" onclick="checkSingleChoice('projects-q1','projects-q1-feedback','omar','Correct! Omar partnered with a mentor to develop a full grant proposal.','Look back at the stories—Omar transformed his idea into a proposal.')">Check Answer</button>
                        <p class="quiz-feedback" id="projects-q1-feedback"></p>
                    </div>
                    <div class="quiz-card animate-on-scroll">
                        <p class="quiz-question-text">What tool did Mariam use with her mentor to track her public speaking progress?</p>
                        <div class="quiz-options">
                            <label class="quiz-option">
                                <input type="radio" name="projects-q2" value="spreadsheet">
                                <span>A shared spreadsheet to list weekly accomplishments.</span>
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="projects-q2" value="recording">
                                <span>A recording tool that let them review and refine each presentation.</span>
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="projects-q2" value="survey">
                                <span>An audience survey that classmates completed after her talks.</span>
                            </label>
                        </div>
                        <button class="activity-btn quiz-btn" type="button" onclick="checkSingleChoice('projects-q2','projects-q2-feedback','recording','Yes! Reviewing recordings helped Mariam see her growth.','Revisit Mariam\'s story—she and her mentor analysed recordings together.')">Check Answer</button>
                        <p class="quiz-feedback" id="projects-q2-feedback"></p>
                    </div>
                </div>
                <div class="controls animate-on-scroll">
                    <button class="activity-btn secondary" onclick="prevSlide()"><i class="fas fa-arrow-left"></i> Back</button>
                    <button class="activity-btn" onclick="nextSlide()">Next <i class="fas fa-arrow-right"></i></button>
                </div>
            </div>

            <!-- Slide 11: The SMART Framework -->
            <div id="slide-11" class="screen">
                <div class="animate-on-scroll">
                    <h1 class="slide-title"><i class="fas fa-bullseye"></i> Create a Measurable Project</h1>
                </div>
                <div class="slide-content">
                     <img src="https://images.pexels.com/photos/853151/pexels-photo-853151.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" alt="A group of people working together to achieve a goal">
                    <p class="animate-on-scroll">Successful projects require clear goals. To make sure your project is effective, we use the <strong>SMART</strong> framework.</p>
                    <p class="animate-on-scroll">This framework ensures that your project has measurable outcomes and is realistic for you to complete in three months.</p>
                    <ul class="slide-list smart">
                        <li data-letter="S" class="animate-on-scroll">Specific</li>
                        <li data-letter="M" class="animate-on-scroll">Measurable</li>
                        <li data-letter="A" class="animate-on-scroll">Achievable</li>
                        <li data-letter="R" class="animate-on-scroll">Relevant</li>
                        <li data-letter="T" class="animate-on-scroll">Time-bound</li>
                    </ul>
                </div>
                <div class="controls animate-on-scroll">
                    <button class="activity-btn secondary" onclick="prevSlide()"><i class="fas fa-arrow-left"></i> Back</button>
                    <button class="activity-btn" onclick="nextSlide()">Next <i class="fas fa-arrow-right"></i></button>
                </div>
            </div>

            <!-- Slide 12: Example Project: CV Development -->
            <div id="slide-12" class="screen">
                <div class="animate-on-scroll">
                    <h1 class="slide-title"><i class="fas fa-check-circle"></i> Example: A SMART Goal</h1>
                </div>
                <div class="slide-content">
                    <img src="https://images.pexels.com/photos/598917/pexels-photo-598917.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" alt="A person writing in a notebook">
                    <p class="animate-on-scroll">Let's take a common goal: "I want to improve my CV."</p>
                    <p class="animate-on-scroll">To make this a SMART goal, you need to add specific actions and a deadline. For example:</p>
                    <p class="animate-on-scroll"><strong>SMART Goal:</strong> "I will update my CV to include specific descriptions of my three most important skills and experiences, and I will complete this by the end of this month."</p>
                </div>
                <div class="controls animate-on-scroll">
                    <button class="activity-btn secondary" onclick="prevSlide()"><i class="fas fa-arrow-left"></i> Back</button>
                    <button class="activity-btn" onclick="nextSlide()">Next <i class="fas fa-arrow-right"></i></button>
                </div>
            </div>

            <!-- Slide 13 Quiz: SMART Framework Check -->
            <div id="slide-13" class="screen">
                <div class="animate-on-scroll">
                    <h1 class="slide-title"><i class="fas fa-bullseye"></i> Quick Check: SMART Planning</h1>
                </div>
                <div class="slide-content">
                    <div class="quiz-card animate-on-scroll">
                        <p class="quiz-question-text">What does the “R” in the SMART framework represent for our projects?</p>
                        <div class="quiz-options">
                            <label class="quiz-option">
                                <input type="radio" name="smart-q1" value="realistic">
                                <span>Realistic – making sure your resources are available.</span>
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="smart-q1" value="relevant">
                                <span>Relevant – aligning the goal with your broader purpose and needs.</span>
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="smart-q1" value="rewarding">
                                <span>Rewarding – guaranteeing a prize at the end of the project.</span>
                            </label>
                        </div>
                        <button class="activity-btn quiz-btn" type="button" onclick="checkSingleChoice('smart-q1','smart-q1-feedback','relevant','Right! Relevant goals connect to what matters most for you.','Hint: SMART keeps projects aligned with your purpose, not with external rewards.')">Check Answer</button>
                        <p class="quiz-feedback" id="smart-q1-feedback"></p>
                    </div>
                    <div class="quiz-card animate-on-scroll">
                        <p class="quiz-question-text">In the CV SMART goal example, what was the time-bound commitment?</p>
                        <div class="quiz-options">
                            <label class="quiz-option">
                                <input type="radio" name="smart-q2" value="week">
                                <span>Finish updating the CV within one week.</span>
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="smart-q2" value="month">
                                <span>Complete the CV updates by the end of the current month.</span>
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="smart-q2" value="semester">
                                <span>Wrap up the CV edits by the end of the academic year.</span>
                            </label>
                        </div>
                        <button class="activity-btn quiz-btn" type="button" onclick="checkSingleChoice('smart-q2','smart-q2-feedback','month','Correct! The example committed to finishing by month’s end.','Check the example again—the deadline keeps the goal accountable within the month.')">Check Answer</button>
                        <p class="quiz-feedback" id="smart-q2-feedback"></p>
                    </div>
                </div>
                <div class="controls animate-on-scroll">
                    <button class="activity-btn secondary" onclick="prevSlide()"><i class="fas fa-arrow-left"></i> Back</button>
                    <button class="activity-btn" onclick="nextSlide()">Next <i class="fas fa-arrow-right"></i></button>
                </div>
            </div>

            <!-- Slide 14: The Project Journey: Step 1 (AI Tool) -->
            <div id="slide-14" class="screen">
                <div class="animate-on-scroll">
                    <h1 class="slide-title"><i class="fas fa-rocket"></i> Step 1: The AI Guide</h1>
                </div>
                <div class="animate-on-scroll">
                    <h2 class="rubric">Refining your idea into a strong proposal.</h2>
                </div>
                <div class="slide-content">
                    <img src="https://images.pexels.com/photos/8386440/pexels-photo-8386440.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" alt="A person interacting with an AI robot">
                    <p class="animate-on-scroll">Once you have an initial idea, you will use our AI guide tool. This tool will help you turn your idea into a detailed project plan that follows the SMART framework.</p>
                    <p class="animate-on-scroll">The final result will be a complete proposal ready for submission.</p>
                </div>
                <div class="controls animate-on-scroll">
                    <button class="activity-btn secondary" onclick="prevSlide()"><i class="fas fa-arrow-left"></i> Back</button>
                    <button class="activity-btn" onclick="nextSlide()">Next <i class="fas fa-arrow-right"></i></button>
                </div>
            </div>

            <!-- Slide 15: The Project Journey: Step 2 & 3 (Matching and First Meeting) -->
            <div id="slide-15" class="screen">
                <div class="animate-on-scroll">
                    <h1 class="slide-title"><i class="fas fa-user-friends"></i> Step 2 & 3: Matching & First Meeting</h1>
                </div>
                <div class="slide-content">
                     <img src="https://images.pexels.com/photos/3184339/pexels-photo-3184339.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" alt="A group of colleagues having a meeting">
                    <div class="animate-on-scroll">
                        <h3>Step 2: Mentor Matching</h3>
                        <p>After you submit your refined project proposal, our team will review it. We will then assign you a mentor who has specific experience and skills related to your project goal.</p>
                    </div>
                    <div class="animate-on-scroll">
                        <h3>Step 3: The First Meeting</h3>
                        <p>Your first meeting with your mentor focuses on planning and expectation setting. You will review the three-month project plan together and further segment it into weekly tasks.</p>
                    </div>
                </div>
                <div class="controls animate-on-scroll">
                    <button class="activity-btn secondary" onclick="prevSlide()"><i class="fas fa-arrow-left"></i> Back</button>
                    <button class="activity-btn" onclick="nextSlide()">Next <i class="fas fa-arrow-right"></i></button>
                </div>
            </div>

            <!-- Slide 16 Quiz: Project Journey Check -->
            <div id="slide-16" class="screen">
                <div class="animate-on-scroll">
                    <h1 class="slide-title"><i class="fas fa-route"></i> Quick Check: Journey Steps</h1>
                </div>
                <div class="slide-content">
                    <div class="quiz-card animate-on-scroll">
                        <p class="quiz-question-text">What is the first thing that happens after you submit your project proposal?</p>
                        <div class="quiz-options">
                            <label class="quiz-option">
                                <input type="radio" name="journey-q1" value="matching">
                                <span>The team reviews it and pairs you with a mentor whose experience fits your goal.</span>
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="journey-q1" value="presentation">
                                <span>You present your idea to the whole cohort for voting.</span>
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="journey-q1" value="feedback-form">
                                <span>You complete a feedback form about the AI tool.</span>
                            </label>
                        </div>
                        <button class="activity-btn quiz-btn" type="button" onclick="checkSingleChoice('journey-q1','journey-q1-feedback','matching','Correct! Matching you with the right mentor is the next step.','Remember: once your proposal is in, our team focuses on pairing you thoughtfully.')">Check Answer</button>
                        <p class="quiz-feedback" id="journey-q1-feedback"></p>
                    </div>
                    <div class="quiz-card animate-on-scroll">
                        <p class="quiz-question-text">What is a key focus of the very first mentor meeting?</p>
                        <div class="quiz-options">
                            <label class="quiz-option">
                                <input type="radio" name="journey-q2" value="weekly-plan">
                                <span>Breaking the three-month plan into weekly tasks and setting expectations together.</span>
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="journey-q2" value="celebration">
                                <span>Celebrating the final results of your project.</span>
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="journey-q2" value="budget">
                                <span>Filling out reimbursement paperwork for supplies.</span>
                            </label>
                        </div>
                        <button class="activity-btn quiz-btn" type="button" onclick="checkSingleChoice('journey-q2','journey-q2-feedback','weekly-plan','Exactly! You and your mentor co-create detailed weekly steps during the first meeting.','Take another look—your first meeting is all about planning, not final celebrations yet.')">Check Answer</button>
                        <p class="quiz-feedback" id="journey-q2-feedback"></p>
                    </div>
                </div>
                <div class="controls animate-on-scroll">
                    <button class="activity-btn secondary" onclick="prevSlide()"><i class="fas fa-arrow-left"></i> Back</button>
                    <button class="activity-btn" onclick="nextSlide()">Next <i class="fas fa-arrow-right"></i></button>
                </div>
            </div>

            <!-- Slide 17: Ongoing Mentorship and Tracking -->
            <div id="slide-17" class="screen">
                <div class="animate-on-scroll">
                    <h1 class="slide-title"><i class="fas fa-chart-line"></i> Ongoing Mentorship and Progress</h1>
                </div>
                <div class="slide-content">
                     <img src="https://images.pexels.com/photos/3183197/pexels-photo-3183197.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" alt="A team working together on a project">
                    <p class="animate-on-scroll">You and your mentor will continue to meet weekly throughout the project duration. These sessions are 30 minutes long and focus on reflecting on the previous week's progress.</p>
                    <p class="animate-on-scroll">To keep track of your work, you will use a shared spreadsheet. You should log your work each week so that both you and your mentor can remain aligned and focused on celebrating your progress.</p>
                </div>
                <div class="controls animate-on-scroll">
                    <button class="activity-btn secondary" onclick="prevSlide()"><i class="fas fa-arrow-left"></i> Back</button>
                    <button class="activity-btn" onclick="nextSlide()">Next <i class="fas fa-arrow-right"></i></button>
                </div>
            </div>

            <!-- Slide 18: Time Commitment and Boundaries -->
            <div id="slide-18" class="screen">
                <div class="animate-on-scroll">
                    <h1 class="slide-title"><i class="fas fa-clock"></i> Time Commitment and Boundaries</h1>
                </div>
                <div class="slide-content">
                    <img src="https://images.pexels.com/photos/4348403/pexels-photo-4348403.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" alt="A person working at a desk with a clock in the background">
                    <ul class="slide-list">
                        <li class="animate-on-scroll"><i class="fas fa-calendar-alt"></i> <strong>Project Duration:</strong> The project is designed to be completed in three months.</li>
                        <li class="animate-on-scroll"><i class="fas fa-hourglass-half"></i> <strong>Mentor Time:</strong> Mentors allocate a maximum of 1 hour per week to each student.</li>
                        <li class="animate-on-scroll"><i class="fas fa-plus-circle"></i> <strong>Contingency:</strong> If necessary, we can allow for an extra "contingency month".</li>
                    </ul>
                </div>
                <div class="controls animate-on-scroll">
                    <button class="activity-btn secondary" onclick="prevSlide()"><i class="fas fa-arrow-left"></i> Back</button>
                    <button class="activity-btn" onclick="nextSlide()">Next <i class="fas fa-arrow-right"></i></button>
                </div>
            </div>

            <!-- Slide 19: Handling Absences -->
            <div id="slide-19" class="screen">
                <div class="animate-on-scroll">
                    <h1 class="slide-title"><i class="fas fa-user-clock"></i> Handling Absences</h1>
                </div>
                <div class="slide-content">
                    <img src="https://images.pexels.com/photos/56759/pexels-photo-56759.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" alt="A person looking at a calendar">
                    <ul class="slide-list">
                        <li class="animate-on-scroll">If you miss a session, you can make it up at another time as arranged with your mentor.</li>
                        <li class="animate-on-scroll">If you miss three sessions in a row without an acceptable excuse, your project will be placed on hold.</li>
                        <li class="animate-on-scroll">When you are ready to re-engage, we can resume the project.</li>
                    </ul>
                </div>
                <div class="controls animate-on-scroll">
                    <button class="activity-btn secondary" onclick="prevSlide()"><i class="fas fa-arrow-left"></i> Back</button>
                    <button class="activity-btn" onclick="nextSlide()">Next <i class="fas fa-arrow-right"></i></button>
                </div>
            </div>

            <!-- Slide 20 Quiz: Commitment & Boundaries Check -->
            <div id="slide-20" class="screen">
                <div class="animate-on-scroll">
                    <h1 class="slide-title"><i class="fas fa-user-shield"></i> Quick Check: Commitments & Care</h1>
                </div>
                <div class="slide-content">
                    <div class="quiz-card animate-on-scroll">
                        <p class="quiz-question-text">How long is each weekly mentoring session designed to last?</p>
                        <div class="quiz-options">
                            <label class="quiz-option">
                                <input type="radio" name="care-q1" value="thirty">
                                <span>About 30 minutes focused on reflection and planning.</span>
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="care-q1" value="sixty">
                                <span>Exactly 60 minutes with required presentations.</span>
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="care-q1" value="drop-in">
                                <span>No set time—mentees drop in and out at any point.</span>
                            </label>
                        </div>
                        <button class="activity-btn quiz-btn" type="button" onclick="checkSingleChoice('care-q1','care-q1-feedback','thirty','Great! Weekly check-ins are focused, 30-minute conversations.','Check the time commitment slide—the program keeps meetings short and consistent.')">Check Answer</button>
                        <p class="quiz-feedback" id="care-q1-feedback"></p>
                    </div>
                    <div class="quiz-card animate-on-scroll">
                        <p class="quiz-question-text">What happens if a mentee misses three sessions in a row without an acceptable reason?</p>
                        <div class="quiz-options">
                            <label class="quiz-option">
                                <input type="radio" name="care-q2" value="bonus">
                                <span>They receive extra time with their mentor to catch up.</span>
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="care-q2" value="hold">
                                <span>The project is placed on hold until the mentee is ready to re-engage.</span>
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="care-q2" value="replacement">
                                <span>They are automatically assigned a new mentor.</span>
                            </label>
                        </div>
                        <button class="activity-btn quiz-btn" type="button" onclick="checkSingleChoice('care-q2','care-q2-feedback','hold','Correct—the project pauses so mentees can return when ready.','Check the absence guidance: consistent participation keeps the partnership active.')">Check Answer</button>
                        <p class="quiz-feedback" id="care-q2-feedback"></p>
                    </div>
                </div>
                <div class="controls animate-on-scroll">
                    <button class="activity-btn secondary" onclick="prevSlide()"><i class="fas fa-arrow-left"></i> Back</button>
                    <button class="activity-btn" onclick="nextSlide()">Next <i class="fas fa-arrow-right"></i></button>
                </div>
            </div>

            <!-- Slide 21: Practical Exercise and Q&A -->
            <div id="slide-21" class="screen">
                <div class="animate-on-scroll">
                    <h1 class="slide-title"><i class="fas fa-lightbulb"></i> Next Steps: Brainstorming</h1>
                </div>
                <div class="slide-content">
                     <img src="https://images.pexels.com/photos/3184465/pexels-photo-3184465.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" alt="A group of people brainstorming with sticky notes">
                    <p class="animate-on-scroll">Now, let's discuss your ideas. Does anyone have a project in mind?</p>
                    <p class="animate-on-scroll">We will spend the next 20 minutes using the AI guide tool to start developing your proposals.</p>
                    <p class="animate-on-scroll">Please feel free to ask questions about the process or your project idea now.</p>
                </div>
                <div class="controls animate-on-scroll">
                    <button class="activity-btn secondary" onclick="prevSlide()"><i class="fas fa-arrow-left"></i> Back</button>
                    <button class="activity-btn" onclick="nextSlide()">Next <i class="fas fa-arrow-right"></i></button>
                </div>
            </div>

            <!-- Slide 22: Reflection Workspace -->
            <div id="slide-22" class="screen">
                <div class="animate-on-scroll">
                    <h1 class="slide-title"><i class="fas fa-pen-to-square"></i> Reflection & Planning Notes</h1>
                </div>
                <div class="slide-content reflection-form">
                    <div class="reflection-field animate-on-scroll">
                        <label for="reflection-idea">Project idea I want to explore</label>
                        <textarea id="reflection-idea" placeholder="Capture the community challenge or opportunity you care about."></textarea>
                    </div>
                    <div class="reflection-field animate-on-scroll">
                        <label for="reflection-smart">First SMART-aligned step I can take</label>
                        <textarea id="reflection-smart" placeholder="Draft a Specific, Measurable action you can complete soon."></textarea>
                    </div>
                    <div class="reflection-field animate-on-scroll">
                        <label for="reflection-questions">Questions I want to ask my mentor</label>
                        <textarea id="reflection-questions" placeholder="List the support, resources, or feedback you hope to receive."></textarea>
                    </div>
                </div>
                <div class="controls animate-on-scroll">
                    <button class="activity-btn secondary" onclick="prevSlide()"><i class="fas fa-arrow-left"></i> Back</button>
                    <button class="activity-btn" onclick="showSlide(0)"><i class="fas fa-check"></i> Finish &amp; Restart</button>
                </div>
            </div>

        </div>
        <aside id="notes-dock" aria-label="Collaborative slide notes workspace">
            <div class="notes-dock-header">
                <p class="notes-dock-title"><i class="fas fa-note-sticky" aria-hidden="true"></i> Slide Text Boxes</p>
                <p class="notes-dock-subtitle">Use the session tools foldout to save or load your notes at any time.</p>
            </div>
            <div id="notes-panels" aria-live="polite"></div>
        </aside>
    </main>
    </div>

    <script>
        const localStorageKey = 'mentoring-slide-textboxes';
        const textboxColorOptions = [
            { label: 'Sunlit Sand', value: '#FDF5D6' },
            { label: 'Mint Mist', value: '#E6F4F1' },
            { label: 'Lavender Veil', value: '#F3E9FB' },
            { label: 'Peach Glow', value: '#FFEDE5' },
            { label: 'Sky Wash', value: '#E9F0FF' }
        ];

        let currentSlideIndex = 0;
        const slides = Array.from(document.querySelectorAll('.screen'));
        let slideNotes = {};
        const textboxContainers = {};
        const notesPanels = {};
        let notesPanelsHost = null;
        const slideMapList = document.getElementById('slide-map-list');
        const motionQuery = typeof window !== 'undefined' && window.matchMedia ? window.matchMedia('(prefers-reduced-motion: reduce)') : null;
        let prefersReducedMotion = motionQuery ? motionQuery.matches : false;
        const slideMapButtons = [];

        const highlightScope = document.getElementById('activity-container');
        const highlightToolbar = document.createElement('div');
        highlightToolbar.id = 'highlight-toolbar';
        highlightToolbar.setAttribute('role', 'group');
        highlightToolbar.setAttribute('aria-label', 'Text annotation tools');
        highlightToolbar.setAttribute('aria-hidden', 'true');
        highlightToolbar.hidden = true;

        const highlightToolbarButton = document.createElement('button');
        highlightToolbarButton.type = 'button';
        highlightToolbarButton.className = 'highlight-toolbar__btn';
        highlightToolbarButton.innerHTML = '<i class="fas fa-highlighter" aria-hidden="true"></i><span>Highlight &amp; annotate</span>';
        highlightToolbar.appendChild(highlightToolbarButton);
        document.body.appendChild(highlightToolbar);

        const annotationPopover = document.createElement('div');
        annotationPopover.className = 'annotation-popover';
        annotationPopover.id = 'annotation-popover';
        annotationPopover.setAttribute('role', 'dialog');
        annotationPopover.setAttribute('aria-modal', 'false');
        annotationPopover.setAttribute('aria-hidden', 'true');
        annotationPopover.hidden = true;
        annotationPopover.setAttribute('tabindex', '-1');

        const annotationCloseButton = document.createElement('button');
        annotationCloseButton.type = 'button';
        annotationCloseButton.className = 'annotation-popover__close';
        annotationCloseButton.setAttribute('aria-label', 'Close annotation');
        annotationCloseButton.innerHTML = '<i class="fas fa-times" aria-hidden="true"></i>';

        const annotationBody = document.createElement('p');
        annotationBody.className = 'annotation-popover__body';

        annotationPopover.appendChild(annotationCloseButton);
        annotationPopover.appendChild(annotationBody);
        document.body.appendChild(annotationPopover);

        const annotationComposer = document.createElement('form');
        annotationComposer.className = 'annotation-composer';
        annotationComposer.id = 'annotation-composer';
        annotationComposer.hidden = true;
        annotationComposer.setAttribute('aria-hidden', 'true');
        annotationComposer.setAttribute('role', 'dialog');
        annotationComposer.setAttribute('aria-modal', 'false');
        annotationComposer.noValidate = true;

        const annotationComposerLabel = document.createElement('label');
        annotationComposerLabel.className = 'annotation-composer__label';
        annotationComposerLabel.setAttribute('for', 'annotation-composer-input');
        annotationComposerLabel.textContent = 'Add an annotation';
        annotationComposerLabel.id = 'annotation-composer-label';
        annotationComposer.setAttribute('aria-labelledby', 'annotation-composer-label');

        const annotationComposerTextarea = document.createElement('textarea');
        annotationComposerTextarea.id = 'annotation-composer-input';
        annotationComposerTextarea.className = 'annotation-composer__input';
        annotationComposerTextarea.rows = 4;
        annotationComposerTextarea.placeholder = 'Type your note here…';

        const annotationComposerActions = document.createElement('div');
        annotationComposerActions.className = 'annotation-composer__actions';

        const annotationComposerCancel = document.createElement('button');
        annotationComposerCancel.type = 'button';
        annotationComposerCancel.className = 'annotation-composer__btn annotation-composer__btn--secondary';
        annotationComposerCancel.textContent = 'Cancel';

        const annotationComposerSubmit = document.createElement('button');
        annotationComposerSubmit.type = 'submit';
        annotationComposerSubmit.className = 'annotation-composer__btn annotation-composer__btn--primary';
        annotationComposerSubmit.textContent = 'Save note';

        annotationComposerActions.appendChild(annotationComposerCancel);
        annotationComposerActions.appendChild(annotationComposerSubmit);

        annotationComposer.appendChild(annotationComposerLabel);
        annotationComposer.appendChild(annotationComposerTextarea);
        annotationComposer.appendChild(annotationComposerActions);
        document.body.appendChild(annotationComposer);

        let pendingSelectionRange = null;
        let activeAnnotationTarget = null;
        let composerActiveRange = null;

        if (motionQuery) {
            const updatePreference = (event) => {
                prefersReducedMotion = event.matches;
                const activeSlide = slides[currentSlideIndex];
                if (activeSlide) {
                    animateSlideContents(activeSlide);
                }
            };
            if (typeof motionQuery.addEventListener === 'function') {
                motionQuery.addEventListener('change', updatePreference);
            } else if (typeof motionQuery.addListener === 'function') {
                motionQuery.addListener(updatePreference);
            }
        }

        function isNodeWithinActiveSlide(node) {
            const activeSlide = slides[currentSlideIndex];
            if (!activeSlide || !node) {
                return false;
            }
            let current = node.nodeType === Node.ELEMENT_NODE ? node : node.parentNode;
            while (current) {
                if (current === activeSlide) {
                    return true;
                }
                current = current.parentNode;
            }
            return false;
        }

        function isInsideExistingHighlight(node) {
            if (!node) {
                return false;
            }
            const element = node.nodeType === Node.ELEMENT_NODE ? node : node.parentElement;
            return element ? Boolean(element.closest('.highlight-annotation')) : false;
        }

        function hideHighlightToolbar(options = {}) {
            const { clearSelection = true } = options;
            if (highlightToolbar.hidden) {
                return;
            }
            highlightToolbar.hidden = true;
            highlightToolbar.setAttribute('aria-hidden', 'true');
            if (clearSelection) {
                pendingSelectionRange = null;
            }
        }

        function positionHighlightToolbar(range) {
            const rect = range.getBoundingClientRect();
            const top = window.scrollY + rect.top;
            const left = window.scrollX + rect.left + rect.width / 2;
            highlightToolbar.style.top = `${Math.max(top, 0)}px`;
            highlightToolbar.style.left = `${left}px`;
        }

        function isRangeAnnotatable(range) {
            if (!range || range.collapsed) {
                return false;
            }
            if (!isNodeWithinActiveSlide(range.startContainer) || !isNodeWithinActiveSlide(range.endContainer)) {
                return false;
            }
            if (isInsideExistingHighlight(range.startContainer) || isInsideExistingHighlight(range.endContainer)) {
                return false;
            }
            const fragment = range.cloneContents();
            if (fragment.querySelector && fragment.querySelector('p, li, div, section, article, ul, ol, table, tr, td, th, h1, h2, h3, h4, h5, h6, blockquote')) {
                return false;
            }
            return range.toString().trim().length > 0;
        }

        function showHighlightToolbar(range) {
            pendingSelectionRange = range.cloneRange();
            positionHighlightToolbar(range);
            highlightToolbar.hidden = false;
            highlightToolbar.setAttribute('aria-hidden', 'false');
        }

        function positionAnnotationComposer(range) {
            const rect = range.getBoundingClientRect();
            const top = window.scrollY + rect.bottom + 12;
            const left = window.scrollX + rect.left + rect.width / 2;
            annotationComposer.style.top = `${Math.max(top, 0)}px`;
            annotationComposer.style.left = `${left}px`;
        }

        function openAnnotationComposer(range) {
            if (!range) {
                return;
            }
            composerActiveRange = range.cloneRange();
            positionAnnotationComposer(range);
            annotationComposer.hidden = false;
            annotationComposer.setAttribute('aria-hidden', 'false');
            annotationComposerTextarea.value = '';
            window.requestAnimationFrame(() => {
                annotationComposerTextarea.focus({ preventScroll: true });
            });
        }

        function closeAnnotationComposer({ restoreToolbar = false, clearRange = true } = {}) {
            if (!annotationComposer.hidden) {
                annotationComposer.hidden = true;
                annotationComposer.setAttribute('aria-hidden', 'true');
                annotationComposerTextarea.value = '';
            }
            if (clearRange) {
                composerActiveRange = null;
            }
            if (restoreToolbar && pendingSelectionRange) {
                showHighlightToolbar(pendingSelectionRange);
            }
        }

        function updateHighlightToolbar() {
            const selection = window.getSelection();
            if (!selection || selection.rangeCount === 0) {
                hideHighlightToolbar();
                return;
            }
            const range = selection.getRangeAt(0);
            if (!isRangeAnnotatable(range)) {
                hideHighlightToolbar();
                return;
            }
            hideAnnotationPopover();
            showHighlightToolbar(range);
        }

        function hideAnnotationPopover() {
            if (annotationPopover.hidden) {
                return;
            }
            annotationPopover.hidden = true;
            annotationPopover.setAttribute('aria-hidden', 'true');
            if (activeAnnotationTarget) {
                activeAnnotationTarget.setAttribute('aria-expanded', 'false');
                activeAnnotationTarget = null;
            }
        }

        function positionAnnotationPopover(target) {
            const rect = target.getBoundingClientRect();
            const top = window.scrollY + rect.bottom + 12;
            const left = window.scrollX + rect.left + rect.width / 2;
            annotationPopover.style.top = `${top}px`;
            annotationPopover.style.left = `${left}px`;
        }

        function showAnnotationPopover(target) {
            const annotationText = target?.dataset?.annotation;
            if (!annotationText) {
                hideAnnotationPopover();
                return;
            }
            if (activeAnnotationTarget && activeAnnotationTarget !== target) {
                activeAnnotationTarget.setAttribute('aria-expanded', 'false');
            }
            activeAnnotationTarget = target;
            annotationBody.textContent = annotationText;
            positionAnnotationPopover(target);
            annotationPopover.hidden = false;
            annotationPopover.setAttribute('aria-hidden', 'false');
            target.setAttribute('aria-expanded', 'true');
        }

        function toggleAnnotationPopover(target) {
            if (annotationPopover.hidden || target !== activeAnnotationTarget) {
                showAnnotationPopover(target);
            } else {
                hideAnnotationPopover();
            }
        }

        function applyAnnotation(range, annotationText) {
            if (!range) {
                return;
            }
            const trimmed = annotationText.trim();
            if (!trimmed) {
                return;
            }
            const workingRange = range.cloneRange();
            const highlight = document.createElement('mark');
            highlight.className = 'highlight-annotation';
            highlight.tabIndex = 0;
            highlight.setAttribute('role', 'button');
            highlight.setAttribute('aria-expanded', 'false');
            highlight.setAttribute('aria-controls', 'annotation-popover');
            highlight.setAttribute('aria-haspopup', 'dialog');
            highlight.dataset.annotation = trimmed;
            const contents = workingRange.extractContents();
            highlight.appendChild(contents);
            workingRange.insertNode(highlight);
            highlight.normalize();
            if (highlight.parentNode) {
                highlight.parentNode.normalize();
            }
            const selection = window.getSelection();
            if (selection) {
                selection.removeAllRanges();
            }
            hideHighlightToolbar();
            window.requestAnimationFrame(() => {
                showAnnotationPopover(highlight);
                highlight.focus({ preventScroll: true });
            });
        }

        highlightToolbarButton.addEventListener('mousedown', (event) => {
            event.preventDefault();
        });

        highlightToolbarButton.addEventListener('click', () => {
            if (!pendingSelectionRange) {
                hideHighlightToolbar();
                closeAnnotationComposer();
                return;
            }
            const rangeToAnnotate = pendingSelectionRange.cloneRange();
            hideHighlightToolbar({ clearSelection: false });
            openAnnotationComposer(rangeToAnnotate);
        });

        annotationComposer.addEventListener('submit', (event) => {
            event.preventDefault();
            if (!composerActiveRange) {
                closeAnnotationComposer();
                hideHighlightToolbar();
                return;
            }
            const note = annotationComposerTextarea.value.trim();
            if (!note) {
                annotationComposerTextarea.focus({ preventScroll: true });
                return;
            }
            const rangeToAnnotate = composerActiveRange.cloneRange();
            closeAnnotationComposer();
            applyAnnotation(rangeToAnnotate, note);
        });

        annotationComposerCancel.addEventListener('click', () => {
            closeAnnotationComposer({ restoreToolbar: true });
        });

        annotationCloseButton.addEventListener('click', () => {
            hideAnnotationPopover();
            if (activeAnnotationTarget) {
                activeAnnotationTarget.focus({ preventScroll: true });
            }
        });

        document.addEventListener('selectionchange', () => {
            const activeElement = document.activeElement;
            if (!annotationComposer.hidden && annotationComposer.contains(activeElement)) {
                return;
            }
            closeAnnotationComposer();
            window.requestAnimationFrame(updateHighlightToolbar);
        });

        document.addEventListener('mousedown', (event) => {
            const isToolbar = highlightToolbar.contains(event.target);
            const isComposer = annotationComposer.contains(event.target);
            if (!isToolbar && !isComposer) {
                hideHighlightToolbar();
                closeAnnotationComposer();
            }
        });

        document.addEventListener('click', (event) => {
            if (!annotationPopover.hidden) {
                const isHighlight = event.target.closest?.('.highlight-annotation');
                const isPopover = annotationPopover.contains(event.target);
                if (!isHighlight && !isPopover) {
                    hideAnnotationPopover();
                }
            }
            if (!annotationComposer.hidden) {
                const isComposer = annotationComposer.contains(event.target);
                if (!isComposer && !highlightToolbar.contains(event.target)) {
                    closeAnnotationComposer();
                    hideHighlightToolbar();
                }
            }
        });

        document.addEventListener('keydown', (event) => {
            if (event.key === 'Escape') {
                hideAnnotationPopover();
                hideHighlightToolbar();
                closeAnnotationComposer();
            }
        });

        if (highlightScope) {
            highlightScope.addEventListener('click', (event) => {
                const highlight = event.target.closest?.('.highlight-annotation');
                if (!highlight) {
                    return;
                }
                event.preventDefault();
                hideHighlightToolbar();
                toggleAnnotationPopover(highlight);
            });

            highlightScope.addEventListener('keydown', (event) => {
                if (event.key !== 'Enter' && event.key !== ' ') {
                    return;
                }
                const highlight = event.target.closest?.('.highlight-annotation');
                if (!highlight) {
                    return;
                }
                event.preventDefault();
                hideHighlightToolbar();
                toggleAnnotationPopover(highlight);
            });
        }

        window.addEventListener('scroll', () => {
            hideHighlightToolbar();
            hideAnnotationPopover();
            closeAnnotationComposer();
        }, true);

        window.addEventListener('resize', () => {
            hideHighlightToolbar();
            hideAnnotationPopover();
            closeAnnotationComposer();
        });

        function generateNoteId() {
            return `note-${Date.now().toString(36)}-${Math.random().toString(36).slice(2, 8)}`;
        }

        function createColorPicker(currentColor, onChange) {
            const palette = document.createElement('div');
            palette.className = 'textbox-color-picker';
            palette.setAttribute('role', 'group');
            palette.setAttribute('aria-label', 'Change text box colour');
            const swatches = [];
            const updateSelection = (selectedColor) => {
                swatches.forEach(button => {
                    const isActive = button.dataset.value === selectedColor;
                    button.classList.toggle('is-selected', isActive);
                    button.setAttribute('aria-pressed', isActive ? 'true' : 'false');
                });
            };
            textboxColorOptions.forEach(option => {
                const swatchButton = document.createElement('button');
                swatchButton.type = 'button';
                swatchButton.className = 'textbox-color-picker__swatch';
                swatchButton.dataset.value = option.value;
                swatchButton.style.setProperty('--swatch-color', option.value);
                swatchButton.setAttribute('aria-label', option.label);
                swatchButton.title = option.label;
                swatchButton.setAttribute('aria-pressed', 'false');
                swatchButton.addEventListener('click', () => {
                    if (typeof onChange === 'function') {
                        onChange(option.value);
                    }
                    updateSelection(option.value);
                });
                palette.appendChild(swatchButton);
                swatches.push(swatchButton);
            });
            updateSelection(currentColor);
            return palette;
        }

        function getSlideLabel(slide, index) {
            const rawTitle = slide?.querySelector('.slide-title')?.textContent?.trim() || '';
            const label = rawTitle ? `${rawTitle}` : '';
            const prefix = `Slide ${index + 1}`;
            return label ? `${prefix}: ${label}` : prefix;
        }

        function isValidNotesData(data) {
            if (!data || typeof data !== 'object' || Array.isArray(data)) {
                return false;
            }
            return Object.values(data).every(value => Array.isArray(value) && value.every(note => {
                return note && typeof note === 'object' && 'id' in note && 'color' in note && ('content' in note || 'text' in note);
            }));
        }

        function loadStoredNotes() {
            if (typeof window === 'undefined' || !window.localStorage) {
                return {};
            }
            const stored = window.localStorage.getItem(localStorageKey);
            if (!stored) {
                return {};
            }
            try {
                const parsed = JSON.parse(stored);
                return isValidNotesData(parsed) ? parsed : {};
            } catch (error) {
                console.warn('Unable to parse stored slide notes.', error);
                return {};
            }
        }

        function persistNotes() {
            if (typeof window === 'undefined' || !window.localStorage) {
                return;
            }
            try {
                window.localStorage.setItem(localStorageKey, JSON.stringify(slideNotes));
            } catch (error) {
                console.warn('Unable to save slide notes.', error);
            }
        }

        function buildSlideMap() {
            if (!slideMapList) {
                return;
            }
            slideMapList.innerHTML = '';
            slideMapButtons.length = 0;
            slideMapList.setAttribute('role', 'list');
            const slideMeta = slides.map((slide, index) => ({ slide, index, id: slide.id || `slide-${index + 1}` }));
            const slidesById = new Map(slideMeta.map(meta => [meta.id, meta]));
            const usedIndices = new Set();

            const sectionDefinitions = [
                { title: 'Welcome & Community', slides: ['slide-1', 'slide-2', 'slide-3', 'slide-4', 'slide-5', 'slide-6'] },
                { title: 'Project Inspirations', slides: ['slide-7', 'slide-8', 'slide-9', 'slide-10'] },
                { title: 'Planning Your Path', slides: ['slide-11', 'slide-12', 'slide-13'] },
                { title: 'Mentoring Journey', slides: ['slide-14', 'slide-15', 'slide-16', 'slide-17', 'slide-18', 'slide-19', 'slide-20'] },
                { title: 'Next Steps & Notes', slides: ['slide-21', 'slide-22'] }
            ];

            const createSlideMapEntry = (slide, index) => {
                const listItem = document.createElement('li');
                listItem.className = 'slide-map-item';

                const button = document.createElement('button');
                button.type = 'button';
                button.className = 'slide-map-button';
                const slideNumber = index + 1;
                const rawTitle = slide?.querySelector('.slide-title')?.textContent?.trim() || '';
                const cleanTitle = rawTitle.replace(/\s+/g, ' ').trim();
                const colonIndex = cleanTitle.indexOf(':');
                const mainTitle = colonIndex > -1 ? cleanTitle.slice(0, colonIndex).trim() : cleanTitle;
                const subtitle = colonIndex > -1 ? cleanTitle.slice(colonIndex + 1).trim() : '';

                const numberSpan = document.createElement('span');
                numberSpan.className = 'slide-map-button__number';
                numberSpan.textContent = slideNumber.toString().padStart(2, '0');

                const label = document.createElement('span');
                label.className = 'slide-map-button__label';

                const titleSpan = document.createElement('span');
                titleSpan.className = 'slide-map-button__title';
                titleSpan.textContent = mainTitle || `Slide ${slideNumber}`;
                label.appendChild(titleSpan);

                if (subtitle) {
                    const subtitleSpan = document.createElement('span');
                    subtitleSpan.className = 'slide-map-button__subtitle';
                    subtitleSpan.textContent = subtitle;
                    label.appendChild(subtitleSpan);
                }

                const ariaLabelParts = [`Slide ${slideNumber}`];
                if (cleanTitle) {
                    ariaLabelParts.push(cleanTitle);
                }
                button.setAttribute('aria-label', `Go to ${ariaLabelParts.join(': ')}`);
                button.dataset.slideIndex = index;
                button.appendChild(numberSpan);
                button.appendChild(label);
                button.addEventListener('click', () => showSlide(index));

                listItem.appendChild(button);
                return { listItem, button };
            };

            const appendSection = (title, entries) => {
                if (!entries.length) {
                    return;
                }
                const sectionItem = document.createElement('li');
                sectionItem.className = 'slide-map-group';

                const sectionTitle = document.createElement('h3');
                sectionTitle.className = 'slide-map-group__title';
                sectionTitle.textContent = title;
                sectionItem.appendChild(sectionTitle);

                const sectionList = document.createElement('ol');
                sectionList.className = 'slide-map-group__list';
                sectionList.setAttribute('role', 'list');

                entries.forEach(({ slide, index }) => {
                    const { listItem, button } = createSlideMapEntry(slide, index);
                    sectionList.appendChild(listItem);
                    slideMapButtons.push(button);
                    usedIndices.add(index);
                });

                sectionItem.appendChild(sectionList);
                slideMapList.appendChild(sectionItem);
            };

            sectionDefinitions.forEach(section => {
                const entries = (section.slides || [])
                    .map(id => slidesById.get(id))
                    .filter(Boolean);
                appendSection(section.title, entries);
            });

            const remainingEntries = slideMeta.filter(meta => !usedIndices.has(meta.index));
            appendSection('Additional slides', remainingEntries);

            updateSlideMapIndicator(currentSlideIndex);
        }

        function updateSlideMapIndicator(index) {
            if (!slideMapButtons.length) {
                return;
            }
            slideMapButtons.forEach((button, buttonIndex) => {
                const listItem = button.parentElement;
                const isActive = buttonIndex === index;
                if (listItem) {
                    listItem.classList.toggle('is-active', isActive);
                }
                if (isActive) {
                    button.setAttribute('aria-current', 'step');
                    if (listItem && typeof listItem.scrollIntoView === 'function') {
                        try {
                            listItem.scrollIntoView({ behavior: prefersReducedMotion ? 'auto' : 'smooth', block: 'nearest', inline: 'nearest' });
                        } catch (error) {
                            if (!prefersReducedMotion) {
                                listItem.scrollIntoView();
                            }
                        }
                    }
                } else {
                    button.removeAttribute('aria-current');
                }
            });
        }

        function animateSlideContents(slide) {
            const elementsToAnimate = slide.querySelectorAll('.animate-on-scroll');
            elementsToAnimate.forEach((el, index) => {
                if (prefersReducedMotion) {
                    el.style.opacity = '1';
                    el.classList.remove('animate__animated', 'animate__fadeInUp');
                    return;
                }
                el.classList.remove('animate__animated', 'animate__fadeInUp');
                el.style.opacity = '0';
                void el.offsetWidth;
                setTimeout(() => {
                    el.classList.add('animate__animated', 'animate__fadeInUp');
                    el.style.opacity = '1';
                }, index * 160);
            });
        }

        function handleKeyboardNavigation(event) {
            if (event.defaultPrevented) {
                return;
            }
            const target = event.target;
            const isFormField = target && (
                target.isContentEditable ||
                ['INPUT', 'TEXTAREA', 'SELECT', 'BUTTON'].includes(target.tagName)
            );
            if (isFormField) {
                return;
            }
            if (event.key === 'ArrowRight' || event.key === 'PageDown') {
                event.preventDefault();
                nextSlide();
            } else if (event.key === 'ArrowLeft' || event.key === 'PageUp') {
                event.preventDefault();
                prevSlide();
            } else if (event.key === 'Home') {
                event.preventDefault();
                showSlide(0);
            } else if (event.key === 'End') {
                event.preventDefault();
                showSlide(slides.length - 1);
            }
        }

        function renderSlideTextboxes(slideId) {
            const container = textboxContainers[slideId];
            if (!container) {
                return;
            }
            container.innerHTML = '';
            const notes = Array.isArray(slideNotes[slideId]) ? slideNotes[slideId] : [];
            const panel = notesPanels[slideId];
            if (panel) {
                panel.classList.toggle('empty', notes.length === 0);
            }
            notes.forEach(note => {
                if (!note.content && note.text) {
                    note.content = note.text;
                    delete note.text;
                }
                container.appendChild(createTextboxElement(slideId, note));
            });
        }

        function renderAllSlides() {
            if (!slides.length) {
                setupNotesIoControls();
                return;
            }

            if (!notesPanelsHost) {
                return;
            }

            slides.forEach((slide, index) => {
                const slideId = slide.dataset.slideId || slide.id || `slide-${index + 1}`;
                if (!Array.isArray(slideNotes[slideId])) {
                    slideNotes[slideId] = [];
                }
                renderSlideTextboxes(slideId);
            });

            const activeSlide = slides[currentSlideIndex];
            if (activeSlide) {
                activateNotesPanel(activeSlide.dataset.slideId);
            }
        }

        function activateNotesPanel(slideId) {
            Object.values(notesPanels).forEach(panel => {
                panel.classList.remove('active');
                panel.setAttribute('aria-hidden', 'true');
                panel.hidden = true;
            });

            const panel = notesPanels[slideId];
            if (panel) {
                panel.classList.add('active');
                panel.setAttribute('aria-hidden', 'false');
                panel.hidden = false;
                if (notesPanelsHost) {
                    notesPanelsHost.scrollTop = 0;
                }
            }
        }

        function createTextboxElement(slideId, note) {
            const wrapper = document.createElement('div');
            wrapper.className = 'custom-textbox';
            wrapper.dataset.noteId = note.id;
            wrapper.style.backgroundColor = note.color;

            const actions = document.createElement('div');
            actions.className = 'textbox-actions';

            const colorPicker = createColorPicker(note.color, (newColor) => {
                if (!newColor || note.color === newColor) {
                    return;
                }
                note.color = newColor;
                wrapper.style.backgroundColor = newColor;
                persistNotes();
            });

            const removeButton = document.createElement('button');
            removeButton.type = 'button';
            removeButton.className = 'textbox-remove-btn';
            removeButton.innerHTML = '<i class="fas fa-trash"></i> Remove';
            removeButton.addEventListener('click', () => {
                slideNotes[slideId] = (slideNotes[slideId] || []).filter(existing => existing.id !== note.id);
                persistNotes();
                renderSlideTextboxes(slideId);
            });

            actions.appendChild(colorPicker);
            actions.appendChild(removeButton);

            const content = document.createElement('div');
            content.className = 'textbox-content';
            content.contentEditable = 'true';
            content.dataset.placeholder = 'Type your notes here...';
            content.innerHTML = note.content || '';
            content.addEventListener('input', () => {
                note.content = content.innerHTML;
                persistNotes();
            });

            wrapper.appendChild(actions);
            wrapper.appendChild(content);
            return wrapper;
        }

        function setupNotesIoControls() {
            const saveButton = document.getElementById('save-notes-btn');
            const loadButton = document.getElementById('load-notes-btn');
            const fileInput = document.getElementById('notes-file-input');

            if (saveButton && !saveButton.dataset.initialized) {
                saveButton.addEventListener('click', () => {
                    const data = JSON.stringify(slideNotes, null, 2);
                    const blob = new Blob([data], { type: 'application/json' });
                    const url = URL.createObjectURL(blob);
                    const link = document.createElement('a');
                    link.href = url;
                    link.download = 'mentoring-slide-textboxes.json';
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                    URL.revokeObjectURL(url);
                });
                saveButton.dataset.initialized = 'true';
            }

            if (loadButton && !loadButton.dataset.initialized) {
                loadButton.addEventListener('click', () => fileInput?.click());
                loadButton.dataset.initialized = 'true';
            }

            if (fileInput && !fileInput.dataset.initialized) {
                fileInput.addEventListener('change', event => {
                    const file = event.target.files && event.target.files[0];
                    if (!file) {
                        return;
                    }
                    const reader = new FileReader();
                    reader.onload = (loadEvent) => {
                        try {
                            const parsed = JSON.parse(loadEvent.target.result);
                            if (isValidNotesData(parsed)) {
                                slideNotes = parsed;
                                slides.forEach((slide, index) => {
                                    const slideId = slide.dataset.slideId || slide.id || `slide-${index + 1}`;
                                    if (!Array.isArray(slideNotes[slideId])) {
                                        slideNotes[slideId] = [];
                                    }
                                });
                                persistNotes();
                                renderAllSlides();
                            } else {
                                alert('The selected file does not contain valid notes data.');
                            }
                        } catch (error) {
                            alert('Unable to read that JSON file. Please check the format and try again.');
                        }
                    };
                    reader.onerror = () => {
                        alert('We could not read that file. Please try again with a different JSON export.');
                    };
                    reader.readAsText(file);
                    event.target.value = '';
                });
                fileInput.dataset.initialized = 'true';
            }
        }

        function initializeTextboxes() {
            slideNotes = loadStoredNotes();
            notesPanelsHost = document.getElementById('notes-panels');
            if (!notesPanelsHost) {
                setupNotesIoControls();
                return;
            }

            notesPanelsHost.innerHTML = '';
            for (const key of Object.keys(textboxContainers)) {
                delete textboxContainers[key];
            }
            for (const key of Object.keys(notesPanels)) {
                delete notesPanels[key];
            }

            slides.forEach((slide, index) => {
                const slideId = slide.id || `slide-${index + 1}`;
                slide.dataset.slideId = slideId;
                if (!Array.isArray(slideNotes[slideId])) {
                    slideNotes[slideId] = [];
                }

                const panel = document.createElement('section');
                panel.className = 'notes-panel empty';
                panel.dataset.slideId = slideId;
                panel.setAttribute('aria-hidden', 'true');
                panel.hidden = true;

                const heading = document.createElement('h3');
                heading.className = 'notes-panel-title visually-hidden';
                const headingId = `notes-panel-title-${slideId}`;
                heading.id = headingId;
                heading.textContent = getSlideLabel(slide, index);
                panel.setAttribute('aria-labelledby', headingId);

                const toolbar = document.createElement('div');
                toolbar.className = 'textbox-toolbar';

                const toolbarCaption = document.createElement('p');
                toolbarCaption.className = 'toolbar-caption visually-hidden';
                toolbarCaption.textContent = 'Add a new text box by choosing a colour.';

                const swatchGroup = document.createElement('div');
                swatchGroup.className = 'textbox-swatch-group';

                textboxColorOptions.forEach(option => {
                    const swatchButton = document.createElement('button');
                    swatchButton.type = 'button';
                    swatchButton.className = 'textbox-swatch';
                    swatchButton.style.setProperty('--swatch-color', option.value);
                    swatchButton.setAttribute('aria-label', `Add a ${option.label} text box`);
                    swatchButton.title = option.label;
                    swatchButton.addEventListener('click', () => {
                        const newNote = { id: generateNoteId(), color: option.value, content: '' };
                        slideNotes[slideId].push(newNote);
                        persistNotes();
                        renderSlideTextboxes(slideId);
                        const latestTextbox = textboxContainers[slideId]?.lastElementChild?.querySelector('.textbox-content');
                        if (latestTextbox) {
                            latestTextbox.focus();
                        }
                    });
                    swatchGroup.appendChild(swatchButton);
                });

                toolbar.appendChild(toolbarCaption);
                toolbar.appendChild(swatchGroup);

                const collection = document.createElement('div');
                collection.className = 'textbox-collection';
                textboxContainers[slideId] = collection;

                panel.appendChild(heading);
                panel.appendChild(toolbar);
                panel.appendChild(collection);

                notesPanelsHost.appendChild(panel);
                notesPanels[slideId] = panel;

                renderSlideTextboxes(slideId);
            });

            setupNotesIoControls();
        }

        function showSlide(index) {
            if (!Number.isInteger(index) || index < 0 || index >= slides.length) {
                return;
            }
            slides.forEach((slide, i) => {
                slide.classList.toggle('active', i === index);
            });
            currentSlideIndex = index;
            hideHighlightToolbar();
            hideAnnotationPopover();
            const activeSlide = slides[index];
            if (activeSlide) {
                animateSlideContents(activeSlide);
                activateNotesPanel(activeSlide.dataset.slideId);
            }
            updateSlideMapIndicator(index);
        }

        function nextSlide() {
            if (currentSlideIndex < slides.length - 1) {
                showSlide(currentSlideIndex + 1);
            }
        }

        function prevSlide() {
            if (currentSlideIndex > 0) {
                showSlide(currentSlideIndex - 1);
            }
        }

        function updateQuizFeedback(feedbackId, message, status) {
            const feedback = document.getElementById(feedbackId);
            if (!feedback) return;
            feedback.textContent = message;
            feedback.classList.remove('correct', 'incorrect', 'notice');
            feedback.classList.add(status);
        }

        function checkSingleChoice(groupName, feedbackId, correctValue, successMessage, errorMessage) {
            const selected = document.querySelector(`input[name="${groupName}"]:checked`);
            if (!selected) {
                updateQuizFeedback(feedbackId, 'Please choose an option before checking your answer.', 'notice');
                return;
            }
            if (selected.value === correctValue) {
                updateQuizFeedback(feedbackId, successMessage, 'correct');
            } else {
                updateQuizFeedback(feedbackId, errorMessage, 'incorrect');
            }
        }

        // Initialize presentation on load
        document.addEventListener('DOMContentLoaded', () => {
            buildSlideMap();
            initializeTextboxes();
            showSlide(0);
            try {
                document.addEventListener('keydown', handleKeyboardNavigation, { passive: false });
            } catch (error) {
                document.addEventListener('keydown', handleKeyboardNavigation);
            }

            const notesPanel = document.getElementById('notes-io-controls');
            if (notesPanel) {
                notesPanel.classList.add('animate__animated', 'animate__fadeInDown');
                notesPanel.style.opacity = '1';
            }
        });
    </script>

</body>
</html>
